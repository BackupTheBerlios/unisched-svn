<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>University Scheduling System: C:/xampp/htdocs/uss2/lib/xajax_js/xajax.js Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>C:/xampp/htdocs/uss2/lib/xajax_js/xajax.js</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* xajax Javascript library :: version 0.2.5 */</span>
<a name="l00002"></a>00002 function Xajax(){this.arrayContainsValue=function(array,valueToCheck){<span class="keywordflow">for</span>(i in array){<span class="keywordflow">if</span>(array[i]==valueToCheck)<span class="keywordflow">return</span> <span class="keyword">true</span>;}<span class="keywordflow">return</span> <span class="keyword">false</span>;};this.DebugMessage=function(text){<span class="keywordflow">if</span>(text.length &gt; 1000)text=text.substr(0,1000)+<span class="stringliteral">"...\n[long response]\n..."</span>;<span class="keywordflow">try</span>{<span class="keywordflow">if</span>(this.debugWindow==undefined||this.debugWindow.closed==<span class="keyword">true</span>){this.debugWindow=window.open(<span class="stringliteral">'about:blank'</span>,<span class="stringliteral">'xajax-debug'</span>,<span class="stringliteral">'width=800,height=600,scrollbars=1,resizable,status'</span>);this.debugWindow.document.write(<span class="stringliteral">'&lt;html&gt;&lt;head&gt;&lt;title&gt;Xajax debug output&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;Xajax debug output&lt;/h2&gt;&lt;div id="debugTag"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;'</span>);}debugTag=this.debugWindow.document.getElementById(<span class="stringliteral">'debugTag'</span>);<span class="keywordflow">if</span>(!debugTag)<span class="keywordflow">throw</span> <span class="keyword">new</span> Error();text=text.replace(/&amp;/g,<span class="stringliteral">"&amp;amp;"</span>);text=text.replace(/&lt;/g,<span class="stringliteral">"&amp;lt;"</span>);text=text.replace(/&gt;/g,<span class="stringliteral">"&amp;gt;"</span>);debugTag.innerHTML=(<span class="stringliteral">'&lt;b&gt;'</span>+(<span class="keyword">new</span> Date()).toString()+<span class="stringliteral">'&lt;/b&gt;: '</span>+text+<span class="stringliteral">'&lt;hr/&gt;'</span>)+debugTag.innerHTML;}<span class="keywordflow">catch</span>(e){alert(<span class="stringliteral">"Xajax Debug:\n "</span>+text);}
<a name="l00003"></a>00003 };this.workId=<span class="stringliteral">'xajaxWork'</span>+<span class="keyword">new</span> Date().getTime();this.depth=0;this.responseErrorsForAlert=[<span class="stringliteral">"400"</span>,<span class="stringliteral">"401"</span>,<span class="stringliteral">"402"</span>,<span class="stringliteral">"403"</span>,<span class="stringliteral">"404"</span>,<span class="stringliteral">"500"</span>,<span class="stringliteral">"501"</span>,<span class="stringliteral">"502"</span>,<span class="stringliteral">"503"</span>];this.getRequestObject=function(){<span class="keywordflow">if</span>(xajaxDebug)this.DebugMessage(<span class="stringliteral">"Initializing Request Object.."</span>);var req=null;<span class="keywordflow">if</span>(typeof XMLHttpRequest!=<span class="stringliteral">"undefined"</span>)
<a name="l00004"></a>00004 req=<span class="keyword">new</span> XMLHttpRequest();<span class="keywordflow">if</span>(!req&amp;&amp;typeof ActiveXObject!=<span class="stringliteral">"undefined"</span>){<span class="keywordflow">try</span>{req=<span class="keyword">new</span> ActiveXObject(<span class="stringliteral">"Msxml2.XMLHTTP"</span>);XMLHttpRequest=function(){<span class="keywordflow">return</span> <span class="keyword">new</span> ActiveXObject(<span class="stringliteral">"Msxml2.XMLHTTP"</span>);}
<a name="l00005"></a>00005 }
<a name="l00006"></a>00006 <span class="keywordflow">catch</span>(e){<span class="keywordflow">try</span>{req=<span class="keyword">new</span> ActiveXObject(<span class="stringliteral">"Microsoft.XMLHTTP"</span>);XMLHttpRequest=function(){<span class="keywordflow">return</span> <span class="keyword">new</span> ActiveXObject(<span class="stringliteral">"Microsoft.XMLHTTP"</span>);}
<a name="l00007"></a>00007 }
<a name="l00008"></a>00008 <span class="keywordflow">catch</span>(e2){<span class="keywordflow">try</span>{req=<span class="keyword">new</span> ActiveXObject(<span class="stringliteral">"Msxml2.XMLHTTP.4.0"</span>);XMLHttpRequest=function(){<span class="keywordflow">return</span> <span class="keyword">new</span> ActiveXObject(<span class="stringliteral">"Msxml2.XMLHTTP.4.0"</span>);}
<a name="l00009"></a>00009 }
<a name="l00010"></a>00010 <span class="keywordflow">catch</span>(e3){req=null;}
<a name="l00011"></a>00011 }
<a name="l00012"></a>00012 }
<a name="l00013"></a>00013 }
<a name="l00014"></a>00014 <span class="keywordflow">if</span>(!req&amp;&amp;window.createRequest)
<a name="l00015"></a>00015 req=window.createRequest();<span class="keywordflow">if</span>(!req)this.DebugMessage(<span class="stringliteral">"Request Object Instantiation failed."</span>);<span class="keywordflow">return</span> req;}
<a name="l00016"></a>00016 this.$=function(sId){<span class="keywordflow">if</span>(!sId){<span class="keywordflow">return</span> null;}
<a name="l00017"></a>00017 var returnObj=document.getElementById(sId);<span class="keywordflow">if</span>(!returnObj&amp;&amp;document.all){returnObj=document.all[sId];}
<a name="l00018"></a>00018 <span class="keywordflow">if</span>(xajaxDebug&amp;&amp;!returnObj&amp;&amp;sId!=this.workId){this.DebugMessage(<span class="stringliteral">"Element with the id \""</span>+sId+<span class="stringliteral">"\" not found."</span>);}
<a name="l00019"></a>00019 <span class="keywordflow">return</span> returnObj;}
<a name="l00020"></a>00020 this.include=function(sFileName){var objHead=document.getElementsByTagName(<span class="stringliteral">'head'</span>);var objScript=document.createElement(<span class="stringliteral">'script'</span>);objScript.type=<span class="stringliteral">'text/javascript'</span>;objScript.src=sFileName;objHead[0].appendChild(objScript);}
<a name="l00021"></a>00021 this.stripOnPrefix=function(sEventName){sEventName=sEventName.toLowerCase();<span class="keywordflow">if</span>(sEventName.indexOf(<span class="stringliteral">'on'</span>)==0){sEventName=sEventName.replace(/on/,<span class="stringliteral">''</span>);}
<a name="l00022"></a>00022 <span class="keywordflow">return</span> sEventName;}
<a name="l00023"></a>00023 this.addOnPrefix=function(sEventName){sEventName=sEventName.toLowerCase();<span class="keywordflow">if</span>(sEventName.indexOf(<span class="stringliteral">'on'</span>)!=0){sEventName=<span class="stringliteral">'on'</span>+sEventName;}
<a name="l00024"></a>00024 <span class="keywordflow">return</span> sEventName;}
<a name="l00025"></a>00025 this.addHandler=function(sElementId,sEvent,sFunctionName){<span class="keywordflow">if</span>(window.addEventListener){sEvent=this.stripOnPrefix(sEvent);eval(<span class="stringliteral">"this.$('"</span>+sElementId+<span class="stringliteral">"').addEventListener('"</span>+sEvent+<span class="stringliteral">"',"</span>+sFunctionName+<span class="stringliteral">",false);"</span>);}
<a name="l00026"></a>00026 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(window.attachEvent){sAltEvent=this.addOnPrefix(sEvent);<span class="keywordflow">if</span>(eval(<span class="stringliteral">"this.$('"</span>+sElementId+<span class="stringliteral">"').attachEvent('"</span>+sAltEvent+<span class="stringliteral">"',"</span>+sFunctionName+<span class="stringliteral">");"</span>))
<a name="l00027"></a>00027 window.attachEvent(<span class="stringliteral">'onunload'</span>,
<a name="l00028"></a>00028 eval(<span class="stringliteral">"function(){xajax.$('"</span>+sElementId+<span class="stringliteral">"').detachEvent('"</span>+sAltEvent+<span class="stringliteral">"',"</span>+sFunctionName+<span class="stringliteral">");}"</span>));}
<a name="l00029"></a>00029 <span class="keywordflow">else</span>{sAltEvent=this.addOnPrefix(sEvent);eval(<span class="stringliteral">"this.$('"</span>+sElementId+<span class="stringliteral">"')."</span>+sAltEvent+<span class="stringliteral">" = "</span>+sFunctionName);}
<a name="l00030"></a>00030 }
<a name="l00031"></a>00031 this.removeHandler=function(sElementId,sEvent,sFunctionName){<span class="keywordflow">if</span>(window.removeEventListener){sEvent=this.stripOnPrefix(sEvent);eval(<span class="stringliteral">"this.$('"</span>+sElementId+<span class="stringliteral">"').removeEventListener('"</span>+sEvent+<span class="stringliteral">"',"</span>+sFunctionName+<span class="stringliteral">",false);"</span>);}
<a name="l00032"></a>00032 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(window.detachEvent){sAltEvent=this.addOnPrefix(sEvent);<span class="keywordflow">try</span>{eval(<span class="stringliteral">"this.$('"</span>+sElementId+<span class="stringliteral">"').detachEvent('"</span>+sAltEvent+<span class="stringliteral">"',"</span>+sFunctionName+<span class="stringliteral">");"</span>);}<span class="keywordflow">catch</span>(ignore){}
<a name="l00033"></a>00033 }
<a name="l00034"></a>00034 <span class="keywordflow">else</span>{sAltEvent=this.addOnPrefix(sEvent);eval(<span class="stringliteral">"this.$('"</span>+sElementId+<span class="stringliteral">"')."</span>+sAltEvent+<span class="stringliteral">" = null"</span>);}
<a name="l00035"></a>00035 }
<a name="l00036"></a>00036 this.create=function(sParentId,sTag,sId){var objParent=this.$(sParentId);objElement=document.createElement(sTag);objElement.setAttribute(<span class="stringliteral">'id'</span>,sId);<span class="keywordflow">if</span>(objParent)
<a name="l00037"></a>00037 objParent.appendChild(objElement);}
<a name="l00038"></a>00038 this.insert=function(sBeforeId,sTag,sId){var objSibling=this.$(sBeforeId);objElement=document.createElement(sTag);objElement.setAttribute(<span class="stringliteral">'id'</span>,sId);objSibling.parentNode.insertBefore(objElement,objSibling);}
<a name="l00039"></a>00039 this.insertAfter=function(sAfterId,sTag,sId){var objSibling=this.$(sAfterId);objElement=document.createElement(sTag);objElement.setAttribute(<span class="stringliteral">'id'</span>,sId);objSibling.parentNode.insertBefore(objElement,objSibling.nextSibling);}
<a name="l00040"></a>00040 this.getInput=function(sType,sName,sId){var Obj;<span class="keywordflow">if</span>(!window.addEventListener){Obj=document.createElement(<span class="stringliteral">'&lt;input type="'</span>+sType+<span class="stringliteral">'" id="'</span>+sId+<span class="stringliteral">'" name="'</span>+sName+<span class="stringliteral">'"&gt;'</span>);}
<a name="l00041"></a>00041 <span class="keywordflow">else</span>{Obj=document.createElement(<span class="stringliteral">'input'</span>);Obj.setAttribute(<span class="stringliteral">'type'</span>,sType);Obj.setAttribute(<span class="stringliteral">'name'</span>,sName);Obj.setAttribute(<span class="stringliteral">'id'</span>,sId);}
<a name="l00042"></a>00042 <span class="keywordflow">return</span> Obj;}
<a name="l00043"></a>00043 this.createInput=function(sParentId,sType,sName,sId){var objParent=this.$(sParentId);var objElement=this.getInput(sType,sName,sId);<span class="keywordflow">if</span>(objParent&amp;&amp;objElement)
<a name="l00044"></a>00044 objParent.appendChild(objElement);}
<a name="l00045"></a>00045 this.insertInput=function(sBeforeId,sType,sName,sId){var objSibling=this.$(sBeforeId);var objElement=this.getInput(sType,sName,sId);<span class="keywordflow">if</span>(objElement&amp;&amp;objSibling&amp;&amp;objSibling.parentNode)
<a name="l00046"></a>00046 objSibling.parentNode.insertBefore(objElement,objSibling);}
<a name="l00047"></a>00047 this.insertInputAfter=function(sAfterId,sType,sName,sId){var objSibling=this.$(sAfterId);var objElement=this.getInput(sType,sName,sId);<span class="keywordflow">if</span>(objElement&amp;&amp;objSibling&amp;&amp;objSibling.parentNode){objSibling.parentNode.insertBefore(objElement,objSibling.nextSibling);}
<a name="l00048"></a>00048 }
<a name="l00049"></a>00049 this.<span class="keyword">remove</span>=function(sId){objElement=this.$(sId);<span class="keywordflow">if</span>(objElement&amp;&amp;objElement.parentNode&amp;&amp;objElement.parentNode.removeChild){objElement.parentNode.removeChild(objElement);}
<a name="l00050"></a>00050 }
<a name="l00051"></a>00051 this.replace=function(sId,sAttribute,sSearch,sReplace){var bFunction=<span class="keyword">false</span>;<span class="keywordflow">if</span>(sAttribute==<span class="stringliteral">"innerHTML"</span>)
<a name="l00052"></a>00052 sSearch=this.getBrowserHTML(sSearch);eval(<span class="stringliteral">"var txt=this.$('"</span>+sId+<span class="stringliteral">"')."</span>+sAttribute);<span class="keywordflow">if</span>(typeof txt==<span class="stringliteral">"function"</span>){txt=txt.toString();bFunction=<span class="keyword">true</span>;}
<a name="l00053"></a>00053 <span class="keywordflow">if</span>(txt.indexOf(sSearch)&gt;-1){var newTxt=<span class="stringliteral">''</span>;<span class="keywordflow">while</span>(txt.indexOf(sSearch)&gt;-1){x=txt.indexOf(sSearch)+sSearch.length+1;newTxt+=txt.substr(0,x).replace(sSearch,sReplace);txt=txt.substr(x,txt.length-x);}
<a name="l00054"></a>00054 newTxt+=txt;<span class="keywordflow">if</span>(bFunction){eval(<span class="stringliteral">'this.$("'</span>+sId+<span class="stringliteral">'").'</span>+sAttribute+<span class="stringliteral">'=newTxt;'</span>);}
<a name="l00055"></a>00055 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this.willChange(sId,sAttribute,newTxt)){eval(<span class="stringliteral">'this.$("'</span>+sId+<span class="stringliteral">'").'</span>+sAttribute+<span class="stringliteral">'=newTxt;'</span>);}
<a name="l00056"></a>00056 }
<a name="l00057"></a>00057 }
<a name="l00058"></a>00058 this.getFormValues=function(frm){var objForm;var submitDisabledElements=<span class="keyword">false</span>;<span class="keywordflow">if</span>(arguments.length &gt; 1&amp;&amp;arguments[1]==<span class="keyword">true</span>)
<a name="l00059"></a>00059 submitDisabledElements=<span class="keyword">true</span>;var prefix=<span class="stringliteral">""</span>;<span class="keywordflow">if</span>(arguments.length &gt; 2)
<a name="l00060"></a>00060 prefix=arguments[2];<span class="keywordflow">if</span>(typeof(frm)==<span class="stringliteral">"string"</span>)
<a name="l00061"></a>00061 objForm=this.$(frm);<span class="keywordflow">else</span>
<a name="l00062"></a>00062 objForm=frm;var sXml=<span class="stringliteral">"&lt;xjxquery&gt;&lt;q&gt;"</span>;<span class="keywordflow">if</span>(objForm&amp;&amp;objForm.tagName.toUpperCase()==<span class="stringliteral">'FORM'</span>){var formElements=objForm.elements;<span class="keywordflow">for</span>(var i=0;i &lt; formElements.length;i++){<span class="keywordflow">if</span>(!formElements[i].name)
<a name="l00063"></a>00063 <span class="keywordflow">continue</span>;<span class="keywordflow">if</span>(formElements[i].name.substring(0,prefix.length)!=prefix)
<a name="l00064"></a>00064 <span class="keywordflow">continue</span>;<span class="keywordflow">if</span>(formElements[i].type&amp;&amp;(formElements[i].type==<span class="stringliteral">'radio'</span>||formElements[i].type==<span class="stringliteral">'checkbox'</span>)&amp;&amp;formElements[i].checked==<span class="keyword">false</span>)
<a name="l00065"></a>00065 <span class="keywordflow">continue</span>;<span class="keywordflow">if</span>(formElements[i].disabled&amp;&amp;formElements[i].disabled==<span class="keyword">true</span>&amp;&amp;submitDisabledElements==<span class="keyword">false</span>)
<a name="l00066"></a>00066 <span class="keywordflow">continue</span>;var name=formElements[i].name;<span class="keywordflow">if</span>(name){<span class="keywordflow">if</span>(sXml!=<span class="stringliteral">'&lt;xjxquery&gt;&lt;q&gt;'</span>)
<a name="l00067"></a>00067 sXml+=<span class="charliteral">'&amp;'</span>;<span class="keywordflow">if</span>(formElements[i].type==<span class="stringliteral">'select-multiple'</span>){<span class="keywordflow">for</span>(var j=0;j &lt; formElements[i].length;j++){<span class="keywordflow">if</span>(formElements[i].options[j].selected==<span class="keyword">true</span>)
<a name="l00068"></a>00068 sXml+=name+<span class="stringliteral">"="</span>+encodeURIComponent(formElements[i].options[j].value)+<span class="stringliteral">"&amp;"</span>;}
<a name="l00069"></a>00069 }
<a name="l00070"></a>00070 <span class="keywordflow">else</span>{sXml+=name+<span class="stringliteral">"="</span>+encodeURIComponent(formElements[i].value);}
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 }
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 sXml+=<span class="stringliteral">"&lt;/q&gt;&lt;/xjxquery&gt;"</span>;<span class="keywordflow">return</span> sXml;}
<a name="l00075"></a>00075 this.objectToXML=function(obj){var sXml=<span class="stringliteral">"&lt;xjxobj&gt;"</span>;<span class="keywordflow">for</span>(i in obj){<span class="keywordflow">try</span>{<span class="keywordflow">if</span>(i==<span class="stringliteral">'constructor'</span>)
<a name="l00076"></a>00076 <span class="keywordflow">continue</span>;<span class="keywordflow">if</span>(obj[i]&amp;&amp;typeof(obj[i])==<span class="stringliteral">'function'</span>)
<a name="l00077"></a>00077 <span class="keywordflow">continue</span>;var key=i;var value=obj[i];<span class="keywordflow">if</span>(value&amp;&amp;typeof(value)==<span class="stringliteral">"object"</span>&amp;&amp;this.depth &lt;=50){this.depth++;value=this.objectToXML(value);this.depth--;}
<a name="l00078"></a>00078 sXml+=<span class="stringliteral">"&lt;e&gt;&lt;k&gt;"</span>+key+<span class="stringliteral">"&lt;/k&gt;&lt;v&gt;"</span>+value+<span class="stringliteral">"&lt;/v&gt;&lt;/e&gt;"</span>;}
<a name="l00079"></a>00079 <span class="keywordflow">catch</span>(e){<span class="keywordflow">if</span>(xajaxDebug)this.DebugMessage(e.name+<span class="stringliteral">": "</span>+e.message);}
<a name="l00080"></a>00080 }
<a name="l00081"></a>00081 sXml+=<span class="stringliteral">"&lt;/xjxobj&gt;"</span>;<span class="keywordflow">return</span> sXml;}
<a name="l00082"></a>00082 this._nodeToObject=function(node){<span class="keywordflow">if</span> (!node)<span class="keywordflow">return</span> <span class="stringliteral">''</span>;<span class="keywordflow">if</span>(node.nodeName==<span class="stringliteral">'#cdata-section'</span>||node.nodeName==<span class="stringliteral">'#text'</span>){var data=<span class="stringliteral">""</span>;<span class="keywordflow">for</span>(var j=0;j&lt;node.parentNode.childNodes.length;j++){data+=node.parentNode.childNodes[j].data;}
<a name="l00083"></a>00083 <span class="keywordflow">return</span> data;}
<a name="l00084"></a>00084 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(node.nodeName==<span class="stringliteral">'xjxobj'</span>){var data=<span class="keyword">new</span> Array();<span class="keywordflow">for</span>(var j=0;j&lt;node.childNodes.length;j++){var child=node.childNodes[j];var key;var value;<span class="keywordflow">if</span>(child.nodeName==<span class="charliteral">'e'</span>){<span class="keywordflow">for</span>(var k=0;k&lt;child.childNodes.length;k++){<span class="keywordflow">if</span>(child.childNodes[k].nodeName==<span class="charliteral">'k'</span>){key=child.childNodes[k].firstChild.data;}
<a name="l00085"></a>00085 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(child.childNodes[k].nodeName==<span class="charliteral">'v'</span>){value=this._nodeToObject(child.childNodes[k].firstChild);}
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 <span class="keywordflow">if</span>(key!=null&amp;&amp;value!=null){data[key]=value;key=value=null;}
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 <span class="keywordflow">return</span> data;}
<a name="l00091"></a>00091 }
<a name="l00092"></a>00092 this.loadingFunction=function(){};this.doneLoadingFunction=function(){};var loadingTimeout;this.call=function(sFunction,aArgs,sRequestType){var i,r,postData;<span class="keywordflow">if</span>(document.body&amp;&amp;xajaxWaitCursor)
<a name="l00093"></a>00093 document.body.style.cursor=<span class="stringliteral">'wait'</span>;<span class="keywordflow">if</span>(xajaxStatusMessages==<span class="keyword">true</span>)window.status=<span class="stringliteral">'Sending Request...'</span>;clearTimeout(loadingTimeout);loadingTimeout=setTimeout(<span class="stringliteral">"xajax.loadingFunction();"</span>,400);<span class="keywordflow">if</span>(xajaxDebug)this.DebugMessage(<span class="stringliteral">"Starting xajax..."</span>);<span class="keywordflow">if</span>(sRequestType==null){var xajaxRequestType=xajaxDefinedPost;}
<a name="l00094"></a>00094 <span class="keywordflow">else</span>{var xajaxRequestType=sRequestType;}
<a name="l00095"></a>00095 var uri=xajaxRequestUri;var value;<span class="keywordflow">switch</span>(xajaxRequestType){<span class="keywordflow">case</span> xajaxDefinedGet:{var uriGet=uri.indexOf(<span class="stringliteral">"?"</span>)==-1?<span class="stringliteral">"?xajax="</span>+encodeURIComponent(sFunction):<span class="stringliteral">"&amp;xajax="</span>+encodeURIComponent(sFunction);<span class="keywordflow">if</span>(aArgs){<span class="keywordflow">for</span>(i=0;i&lt;aArgs.length;i++){value=aArgs[i];<span class="keywordflow">if</span>(typeof(value)==<span class="stringliteral">"object"</span>)
<a name="l00096"></a>00096 value=this.objectToXML(value);uriGet+=<span class="stringliteral">"&amp;xajaxargs[]="</span>+encodeURIComponent(value);}
<a name="l00097"></a>00097 }
<a name="l00098"></a>00098 uriGet+=<span class="stringliteral">"&amp;xajaxr="</span>+<span class="keyword">new</span> Date().getTime();uri+=uriGet;postData=null;}<span class="keywordflow">break</span>;<span class="keywordflow">case</span> xajaxDefinedPost:{postData=<span class="stringliteral">"xajax="</span>+encodeURIComponent(sFunction);postData+=<span class="stringliteral">"&amp;xajaxr="</span>+<span class="keyword">new</span> Date().getTime();<span class="keywordflow">if</span>(aArgs){<span class="keywordflow">for</span>(i=0;i &lt;aArgs.length;i++){value=aArgs[i];<span class="keywordflow">if</span>(typeof(value)==<span class="stringliteral">"object"</span>)
<a name="l00099"></a>00099 value=this.objectToXML(value);postData=postData+<span class="stringliteral">"&amp;xajaxargs[]="</span>+encodeURIComponent(value);}
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 }<span class="keywordflow">break</span>;<span class="keywordflow">default</span>:
<a name="l00102"></a>00102 alert(<span class="stringliteral">"Illegal request type: "</span>+xajaxRequestType);<span class="keywordflow">return</span> <span class="keyword">false</span>;<span class="keywordflow">break</span>;}
<a name="l00103"></a>00103 r=this.getRequestObject();<span class="keywordflow">if</span>(!r)<span class="keywordflow">return</span> <span class="keyword">false</span>;r.open(xajaxRequestType==xajaxDefinedGet?<span class="stringliteral">"GET"</span>:<span class="stringliteral">"POST"</span>,uri,<span class="keyword">true</span>);<span class="keywordflow">if</span>(xajaxRequestType==xajaxDefinedPost){<span class="keywordflow">try</span>{r.setRequestHeader(<span class="stringliteral">"Method"</span>,<span class="stringliteral">"POST "</span>+uri+<span class="stringliteral">" HTTP/1.1"</span>);r.setRequestHeader(<span class="stringliteral">"Content-Type"</span>,<span class="stringliteral">"application/x-www-form-urlencoded"</span>);}
<a name="l00104"></a>00104 <span class="keywordflow">catch</span>(e){alert(<span class="stringliteral">"Your browser does not appear to  support asynchronous requests using POST."</span>);<span class="keywordflow">return</span> <span class="keyword">false</span>;}
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 r.onreadystatechange=function(){<span class="keywordflow">if</span>(r.readyState!=4)
<a name="l00107"></a>00107 <span class="keywordflow">return</span>;<span class="keywordflow">if</span>(r.status==200){<span class="keywordflow">if</span>(xajaxDebug)xajax.DebugMessage(<span class="stringliteral">"Received:\n"</span>+r.responseText);<span class="keywordflow">if</span>(r.responseXML&amp;&amp;r.responseXML.documentElement)
<a name="l00108"></a>00108 xajax.processResponse(r.responseXML);<span class="keywordflow">else</span>{var errorString=<span class="stringliteral">"Error: the XML response that was returned from the server is invalid."</span>;errorString+=<span class="stringliteral">"\nReceived:\n"</span>+r.responseText;trimmedResponseText=r.responseText.replace(/^\s+/g,<span class="stringliteral">""</span>);trimmedResponseText=trimmedResponseText.replace(/\s+$/g,<span class="stringliteral">""</span>);<span class="keywordflow">if</span>(trimmedResponseText!=r.responseText)
<a name="l00109"></a>00109 errorString+=<span class="stringliteral">"\nYou have whitespace in your response."</span>;alert(errorString);document.body.style.cursor=<span class="stringliteral">'default'</span>;<span class="keywordflow">if</span>(xajaxStatusMessages==<span class="keyword">true</span>)window.status=<span class="stringliteral">'Invalid XML response error'</span>;}
<a name="l00110"></a>00110 }
<a name="l00111"></a>00111 <span class="keywordflow">else</span>{<span class="keywordflow">if</span>(xajax.arrayContainsValue(xajax.responseErrorsForAlert,r.status)){var errorString=<span class="stringliteral">"Error: the server returned the following HTTP status: "</span>+r.status;errorString+=<span class="stringliteral">"\nReceived:\n"</span>+r.responseText;alert(errorString);}
<a name="l00112"></a>00112 document.body.style.cursor=<span class="stringliteral">'default'</span>;<span class="keywordflow">if</span>(xajaxStatusMessages==<span class="keyword">true</span>)window.status=<span class="stringliteral">'Invalid XML response error'</span>;}
<a name="l00113"></a>00113 <span class="keyword">delete</span> r;r=null;}
<a name="l00114"></a>00114 <span class="keywordflow">if</span>(xajaxDebug)this.DebugMessage(<span class="stringliteral">"Calling "</span>+sFunction+<span class="stringliteral">" uri="</span>+uri+<span class="stringliteral">" (post:"</span>+postData+<span class="stringliteral">")"</span>);r.send(postData);<span class="keywordflow">if</span>(xajaxStatusMessages==<span class="keyword">true</span>)window.status=<span class="stringliteral">'Waiting for data...'</span>;<span class="keyword">delete</span> r;<span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00115"></a>00115 this.getBrowserHTML=function(html){tmpXajax=this.$(this.workId);<span class="keywordflow">if</span>(!tmpXajax){tmpXajax=document.createElement(<span class="stringliteral">"div"</span>);tmpXajax.setAttribute(<span class="stringliteral">'id'</span>,this.workId);tmpXajax.style.display=<span class="stringliteral">"none"</span>;tmpXajax.style.visibility=<span class="stringliteral">"hidden"</span>;document.body.appendChild(tmpXajax);}
<a name="l00116"></a>00116 tmpXajax.innerHTML=html;var browserHTML=tmpXajax.innerHTML;tmpXajax.innerHTML=<span class="stringliteral">''</span>;<span class="keywordflow">return</span> browserHTML;}
<a name="l00117"></a>00117 this.willChange=function(element,attribute,newData){<span class="keywordflow">if</span>(!document.body){<span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00118"></a>00118 <span class="keywordflow">if</span>(attribute==<span class="stringliteral">"innerHTML"</span>){newData=this.getBrowserHTML(newData);}
<a name="l00119"></a>00119 elementObject=this.$(element);<span class="keywordflow">if</span>(elementObject){var oldData;eval(<span class="stringliteral">"oldData=this.$('"</span>+element+<span class="stringliteral">"')."</span>+attribute);<span class="keywordflow">if</span>(newData!==oldData)
<a name="l00120"></a>00120 <span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00121"></a>00121 <span class="keywordflow">return</span> <span class="keyword">false</span>;}
<a name="l00122"></a>00122 this.viewSource=function(){<span class="keywordflow">return</span> <span class="stringliteral">"&lt;html&gt;"</span>+document.getElementsByTagName(<span class="stringliteral">"HTML"</span>)[0].innerHTML+<span class="stringliteral">"&lt;/html&gt;"</span>;}
<a name="l00123"></a>00123 this.processResponse=function(xml){clearTimeout(loadingTimeout);this.doneLoadingFunction();<span class="keywordflow">if</span>(xajaxStatusMessages==<span class="keyword">true</span>)window.status=<span class="stringliteral">'Processing...'</span>;var tmpXajax=null;xml=xml.documentElement;<span class="keywordflow">if</span>(xml==null)
<a name="l00124"></a>00124 <span class="keywordflow">return</span>;var skipCommands=0;<span class="keywordflow">for</span>(var i=0;i&lt;xml.childNodes.length;i++){<span class="keywordflow">if</span>(skipCommands &gt; 0){skipCommands--;<span class="keywordflow">continue</span>;}
<a name="l00125"></a>00125 <span class="keywordflow">if</span>(xml.childNodes[i].nodeName==<span class="stringliteral">"cmd"</span>){var cmd;var id;var property;var data;var search;var type;var before;var objElement=null;<span class="keywordflow">for</span>(var j=0;j&lt;xml.childNodes[i].attributes.length;j++){<span class="keywordflow">if</span>(xml.childNodes[i].attributes[j].name==<span class="stringliteral">"n"</span>){cmd=xml.childNodes[i].attributes[j].value;}
<a name="l00126"></a>00126 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(xml.childNodes[i].attributes[j].name==<span class="stringliteral">"t"</span>){<span class="keywordtype">id</span>=xml.childNodes[i].attributes[j].value;}
<a name="l00127"></a>00127 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(xml.childNodes[i].attributes[j].name==<span class="stringliteral">"p"</span>){<span class="keyword">property</span>=xml.childNodes[i].attributes[j].value;}
<a name="l00128"></a>00128 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(xml.childNodes[i].attributes[j].name==<span class="stringliteral">"c"</span>){type=xml.childNodes[i].attributes[j].value;}
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 <span class="keywordflow">if</span>(xml.childNodes[i].childNodes.length &gt; 1&amp;&amp;(xml.childNodes[i].firstChild.nodeName==<span class="stringliteral">"#cdata-section"</span>||xml.childNodes[i].firstChild.nodeName==<span class="stringliteral">"#text"</span>)){data=<span class="stringliteral">""</span>;<span class="keywordflow">for</span>(var j=0;j&lt;xml.childNodes[i].childNodes.length;j++){data+=xml.childNodes[i].childNodes[j].data;}
<a name="l00131"></a>00131 }
<a name="l00132"></a>00132 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(xml.childNodes[i].firstChild&amp;&amp;xml.childNodes[i].firstChild.nodeName==<span class="stringliteral">'xjxobj'</span>){data=this._nodeToObject(xml.childNodes[i].firstChild);objElement=<span class="stringliteral">"XJX_SKIP"</span>;}
<a name="l00133"></a>00133 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(xml.childNodes[i].childNodes.length &gt; 1){<span class="keywordflow">for</span>(var j=0;j&lt;xml.childNodes[i].childNodes.length;j++){<span class="keywordflow">if</span>(xml.childNodes[i].childNodes[j].childNodes.length &gt; 1&amp;&amp;(xml.childNodes[i].childNodes[j].firstChild.nodeName==<span class="stringliteral">"#cdata-section"</span>||xml.childNodes[i].childNodes[j].firstChild.nodeName==<span class="stringliteral">"#text"</span>)){var internalData=<span class="stringliteral">""</span>;<span class="keywordflow">for</span>(var k=0;k&lt;xml.childNodes[i].childNodes[j].childNodes.length;k++){internalData+=xml.childNodes[i].childNodes[j].childNodes[k].nodeValue;}
<a name="l00134"></a>00134 }<span class="keywordflow">else</span>{var internalData=xml.childNodes[i].childNodes[j].firstChild.nodeValue;}
<a name="l00135"></a>00135 <span class="keywordflow">if</span>(xml.childNodes[i].childNodes[j].nodeName==<span class="stringliteral">"s"</span>){search=internalData;}
<a name="l00136"></a>00136 <span class="keywordflow">if</span>(xml.childNodes[i].childNodes[j].nodeName==<span class="stringliteral">"r"</span>){data=internalData;}
<a name="l00137"></a>00137 }
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(xml.childNodes[i].firstChild)
<a name="l00140"></a>00140 data=xml.childNodes[i].firstChild.nodeValue;<span class="keywordflow">else</span>
<a name="l00141"></a>00141 data=<span class="stringliteral">""</span>;<span class="keywordflow">if</span>(objElement!=<span class="stringliteral">"XJX_SKIP"</span>)objElement=this.$(id);var cmdFullname;<span class="keywordflow">try</span>{<span class="keywordflow">if</span>(cmd==<span class="stringliteral">"cc"</span>){cmdFullname=<span class="stringliteral">"addConfirmCommands"</span>;var confirmResult=confirm(data);<span class="keywordflow">if</span>(!confirmResult){skipCommands=id;}
<a name="l00142"></a>00142 }
<a name="l00143"></a>00143 <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"al"</span>){cmdFullname=<span class="stringliteral">"addAlert"</span>;alert(data);}
<a name="l00144"></a>00144 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"js"</span>){cmdFullname=<span class="stringliteral">"addScript/addRedirect"</span>;eval(data);}
<a name="l00145"></a>00145 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"jc"</span>){cmdFullname=<span class="stringliteral">"addScriptCall"</span>;var scr=<span class="keywordtype">id</span>+<span class="charliteral">'('</span>;<span class="keywordflow">if</span>(data[0]!=null){scr+=<span class="stringliteral">'data[0]'</span>;<span class="keywordflow">for</span>(var l=1;l&lt;data.length;l++){scr+=<span class="stringliteral">',data['</span>+l+<span class="charliteral">']'</span>;}
<a name="l00146"></a>00146 }
<a name="l00147"></a>00147 scr+=<span class="stringliteral">');'</span>;eval(scr);}
<a name="l00148"></a>00148 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"in"</span>){cmdFullname=<span class="stringliteral">"addIncludeScript"</span>;this.include(data);}
<a name="l00149"></a>00149 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"as"</span>){cmdFullname=<span class="stringliteral">"addAssign/addClear"</span>;<span class="keywordflow">if</span>(this.willChange(<span class="keywordtype">id</span>,property,data)){eval(<span class="stringliteral">"objElement."</span>+property+<span class="stringliteral">"=data;"</span>);}
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ap"</span>){cmdFullname=<span class="stringliteral">"addAppend"</span>;eval(<span class="stringliteral">"objElement."</span>+property+<span class="stringliteral">"+=data;"</span>);}
<a name="l00152"></a>00152 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"pp"</span>){cmdFullname=<span class="stringliteral">"addPrepend"</span>;eval(<span class="stringliteral">"objElement."</span>+property+<span class="stringliteral">"=data+objElement."</span>+property);}
<a name="l00153"></a>00153 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"rp"</span>){cmdFullname=<span class="stringliteral">"addReplace"</span>;this.replace(<span class="keywordtype">id</span>,property,search,data)
<a name="l00154"></a>00154 }
<a name="l00155"></a>00155 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"rm"</span>){cmdFullname=<span class="stringliteral">"addRemove"</span>;this.<span class="keyword">remove</span>(id);}
<a name="l00156"></a>00156 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ce"</span>){cmdFullname=<span class="stringliteral">"addCreate"</span>;this.create(<span class="keywordtype">id</span>,data,property);}
<a name="l00157"></a>00157 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ie"</span>){cmdFullname=<span class="stringliteral">"addInsert"</span>;this.insert(<span class="keywordtype">id</span>,data,property);}
<a name="l00158"></a>00158 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ia"</span>){cmdFullname=<span class="stringliteral">"addInsertAfter"</span>;this.insertAfter(<span class="keywordtype">id</span>,data,property);}
<a name="l00159"></a>00159 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ci"</span>){cmdFullname=<span class="stringliteral">"addCreateInput"</span>;this.createInput(<span class="keywordtype">id</span>,type,data,property);}
<a name="l00160"></a>00160 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ii"</span>){cmdFullname=<span class="stringliteral">"addInsertInput"</span>;this.insertInput(<span class="keywordtype">id</span>,type,data,property);}
<a name="l00161"></a>00161 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"iia"</span>){cmdFullname=<span class="stringliteral">"addInsertInputAfter"</span>;this.insertInputAfter(<span class="keywordtype">id</span>,type,data,property);}
<a name="l00162"></a>00162 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ev"</span>){cmdFullname=<span class="stringliteral">"addEvent"</span>;<span class="keyword">property</span>=this.addOnPrefix(property);eval(<span class="stringliteral">"this.$('"</span>+<span class="keywordtype">id</span>+<span class="stringliteral">"')."</span>+property+<span class="stringliteral">"= function(){"</span>+data+<span class="stringliteral">";}"</span>);}
<a name="l00163"></a>00163 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"ah"</span>){cmdFullname=<span class="stringliteral">"addHandler"</span>;this.addHandler(<span class="keywordtype">id</span>,property,data);}
<a name="l00164"></a>00164 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cmd==<span class="stringliteral">"rh"</span>){cmdFullname=<span class="stringliteral">"addRemoveHandler"</span>;this.removeHandler(<span class="keywordtype">id</span>,property,data);}
<a name="l00165"></a>00165 }
<a name="l00166"></a>00166 <span class="keywordflow">catch</span>(e){<span class="keywordflow">if</span>(xajaxDebug)
<a name="l00167"></a>00167 alert(<span class="stringliteral">"While trying to '"</span>+cmdFullname+<span class="stringliteral">"' (command number "</span>+i+<span class="stringliteral">"), the following error occured:\n"</span>
<a name="l00168"></a>00168 +e.name+<span class="stringliteral">": "</span>+e.message+<span class="stringliteral">"\n"</span>
<a name="l00169"></a>00169 +(<span class="keywordtype">id</span>&amp;&amp;!objElement?<span class="stringliteral">"Object with id='"</span>+<span class="keywordtype">id</span>+<span class="stringliteral">"' wasn't found.\n"</span>:<span class="stringliteral">""</span>));}
<a name="l00170"></a>00170 <span class="keyword">delete</span> objElement;<span class="keyword">delete</span> cmd;<span class="keyword">delete</span> cmdFullname;<span class="keyword">delete</span> id;<span class="keyword">delete</span> property;<span class="keyword">delete</span> search;<span class="keyword">delete</span> data;<span class="keyword">delete</span> type;<span class="keyword">delete</span> before;<span class="keyword">delete</span> internalData;<span class="keyword">delete</span> j;<span class="keyword">delete</span> k;}
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 <span class="keyword">delete</span> xml;<span class="keyword">delete</span> i;document.body.style.cursor=<span class="stringliteral">'default'</span>;<span class="keywordflow">if</span>(xajaxStatusMessages==<span class="keyword">true</span>)window.status=<span class="stringliteral">'Done'</span>;}
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 var xajax=<span class="keyword">new</span> Xajax();xajaxLoaded=<span class="keyword">true</span>;
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jul 22 11:16:46 2008 for University Scheduling System by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
