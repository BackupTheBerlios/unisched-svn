<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>University Scheduling System: C:/xampp/htdocs/uss2/lib/xajax.inc.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>C:/xampp/htdocs/uss2/lib/xajax.inc.php</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00037"></a>00037 <span class="comment">/*</span>
<a name="l00038"></a>00038 <span class="comment">   ----------------------------------------------------------------------------</span>
<a name="l00039"></a>00039 <span class="comment">   | Online documentation for this class is available on the xajax wiki at:   |</span>
<a name="l00040"></a>00040 <span class="comment">   | http://wiki.xajaxproject.org/Documentation:xajax.inc.php                 |</span>
<a name="l00041"></a>00041 <span class="comment">   ----------------------------------------------------------------------------</span>
<a name="l00042"></a>00042 <span class="comment">*/</span>
<a name="l00043"></a>00043 
<a name="l00048"></a>00048 <span class="keywordflow">if</span> (!defined (<span class="stringliteral">'XAJAX_DEFAULT_CHAR_ENCODING'</span>))
<a name="l00049"></a>00049 {
<a name="l00050"></a>00050         define (<span class="stringliteral">'XAJAX_DEFAULT_CHAR_ENCODING'</span>, <span class="stringliteral">'utf-8'</span> );
<a name="l00051"></a>00051 }
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 require_once(dirname(__FILE__).<span class="stringliteral">"/xajaxResponse.inc.php"</span>);
<a name="l00054"></a>00054 
<a name="l00058"></a>00058 <span class="keywordflow">if</span> (!defined (<span class="stringliteral">'XAJAX_GET'</span>))
<a name="l00059"></a>00059 {
<a name="l00060"></a>00060         define (<span class="stringliteral">'XAJAX_GET'</span>, 0);
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 <span class="keywordflow">if</span> (!defined (<span class="stringliteral">'XAJAX_POST'</span>))
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064         define (<span class="stringliteral">'XAJAX_POST'</span>, 1);
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00075"></a>00075 <span class="keyword">class </span>xajax
<a name="l00076"></a>00076 {
<a name="l00083"></a>00083         var $aFunctions;
<a name="l00087"></a>00087         var $aObjects;
<a name="l00091"></a>00091         var $aFunctionRequestTypes;
<a name="l00095"></a>00095         var $aFunctionIncludeFiles;
<a name="l00099"></a>00099         var $sCatchAllFunction;
<a name="l00103"></a>00103         var $sPreFunction;
<a name="l00107"></a>00107         var $sRequestURI;
<a name="l00111"></a>00111         var $sWrapperPrefix;
<a name="l00115"></a>00115         var $bDebug;
<a name="l00119"></a>00119         var $bStatusMessages;   
<a name="l00123"></a>00123         var $bExitAllowed;
<a name="l00127"></a>00127         var $bWaitCursor;
<a name="l00131"></a>00131         var $bErrorHandler;
<a name="l00135"></a>00135         var $sLogFile;
<a name="l00139"></a>00139         var $bCleanBuffer;
<a name="l00143"></a>00143         var $sEncoding;
<a name="l00147"></a>00147         var $bDecodeUTF8Input;
<a name="l00151"></a>00151         var $bOutputEntities;
<a name="l00155"></a>00155         var $aObjArray;
<a name="l00159"></a>00159         var $iPos;
<a name="l00163"></a>00163         var $iTimeout;
<a name="l00164"></a>00164         
<a name="l00176"></a>00176         function xajax($sRequestURI=<span class="stringliteral">""</span>,$sWrapperPrefix=<span class="stringliteral">"xajax_"</span>,$sEncoding=XAJAX_DEFAULT_CHAR_ENCODING,$bDebug=<span class="keyword">false</span>)
<a name="l00177"></a>00177         {
<a name="l00178"></a>00178                 $this-&gt;aFunctions = array();
<a name="l00179"></a>00179                 $this-&gt;aObjects = array();
<a name="l00180"></a>00180                 $this-&gt;aFunctionIncludeFiles = array();
<a name="l00181"></a>00181                 $this-&gt;sRequestURI = $sRequestURI;
<a name="l00182"></a>00182                 <span class="keywordflow">if</span> ($this-&gt;sRequestURI == <span class="stringliteral">""</span>)
<a name="l00183"></a>00183                         $this-&gt;sRequestURI = $this-&gt;_detectURI();
<a name="l00184"></a>00184                 $this-&gt;sWrapperPrefix = $sWrapperPrefix;
<a name="l00185"></a>00185                 $this-&gt;bDebug = $bDebug;
<a name="l00186"></a>00186                 $this-&gt;bStatusMessages = <span class="keyword">false</span>;
<a name="l00187"></a>00187                 $this-&gt;bWaitCursor = <span class="keyword">true</span>;
<a name="l00188"></a>00188                 $this-&gt;bExitAllowed = <span class="keyword">true</span>;
<a name="l00189"></a>00189                 $this-&gt;bErrorHandler = <span class="keyword">false</span>;
<a name="l00190"></a>00190                 $this-&gt;sLogFile = <span class="stringliteral">""</span>;
<a name="l00191"></a>00191                 $this-&gt;bCleanBuffer = <span class="keyword">false</span>;
<a name="l00192"></a>00192                 $this-&gt;setCharEncoding($sEncoding);
<a name="l00193"></a>00193                 $this-&gt;bDecodeUTF8Input = <span class="keyword">false</span>;
<a name="l00194"></a>00194                 $this-&gt;bOutputEntities = <span class="keyword">false</span>;
<a name="l00195"></a>00195                 $this-&gt;iTimeout = 6000;
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197         
<a name="l00203"></a>00203         function getVersion()
<a name="l00204"></a>00204         {
<a name="l00205"></a>00205                 <span class="keywordflow">return</span> <span class="stringliteral">'xajax 0.2.5'</span>;
<a name="l00206"></a>00206         }
<a name="l00207"></a>00207 
<a name="l00214"></a>00214         function setFlags($flags)
<a name="l00215"></a>00215         {
<a name="l00216"></a>00216                 <span class="keywordflow">foreach</span> ($flags as $name =&gt; $value) {
<a name="l00217"></a>00217                         $this-&gt;setFlag($name, $value);
<a name="l00218"></a>00218                 }
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220         
<a name="l00239"></a>00239         function setFlag($name, $value)
<a name="l00240"></a>00240         {
<a name="l00241"></a>00241                 $sVar = <span class="charliteral">'b'</span> . ucfirst($name);
<a name="l00242"></a>00242                 <span class="keywordflow">if</span> (array_key_exists($sVar, get_object_vars($this))) {
<a name="l00243"></a>00243                         $this-&gt;$sVar = (boolean)$value;
<a name="l00244"></a>00244                 }
<a name="l00245"></a>00245                 <span class="keywordflow">else</span> {
<a name="l00246"></a>00246                         trigger_error(<span class="stringliteral">"The flag \"$name\" could not be found"</span>, E_USER_ERROR);
<a name="l00247"></a>00247                 }
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249         
<a name="l00255"></a>00255         function getFlag($name)
<a name="l00256"></a>00256         {
<a name="l00257"></a>00257                 $sVar = <span class="charliteral">'b'</span> . ucfirst($name);
<a name="l00258"></a>00258                 <span class="keywordflow">if</span> (array_key_exists($sVar, get_object_vars($this))) {
<a name="l00259"></a>00259                         <span class="keywordflow">return</span> $this-&gt;$sVar;
<a name="l00260"></a>00260                 }
<a name="l00261"></a>00261                 <span class="keywordflow">else</span> {
<a name="l00262"></a>00262                         <span class="keywordflow">return</span> NULL;
<a name="l00263"></a>00263                 }
<a name="l00264"></a>00264         }
<a name="l00265"></a>00265                 
<a name="l00272"></a>00272         function setTimeout($iTimeout)
<a name="l00273"></a>00273         {
<a name="l00274"></a>00274                 $this-&gt;iTimeout = $iTimeout;
<a name="l00275"></a>00275         }
<a name="l00276"></a>00276         
<a name="l00282"></a>00282         function getTimeout()
<a name="l00283"></a>00283         {
<a name="l00284"></a>00284                 <span class="keywordflow">return</span> $this-&gt;iTimeout;
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286                 
<a name="l00294"></a>00294         function setRequestURI($sRequestURI)
<a name="l00295"></a>00295         {
<a name="l00296"></a>00296                 $this-&gt;sRequestURI = $sRequestURI;
<a name="l00297"></a>00297         }
<a name="l00298"></a>00298 
<a name="l00305"></a>00305         <span class="comment">// </span>
<a name="l00306"></a>00306         function setWrapperPrefix($sPrefix)
<a name="l00307"></a>00307         {
<a name="l00308"></a>00308                 $this-&gt;sWrapperPrefix = $sPrefix;
<a name="l00309"></a>00309         }
<a name="l00310"></a>00310         
<a name="l00314"></a>00314         function debugOn()
<a name="l00315"></a>00315         {
<a name="l00316"></a>00316                 $this-&gt;bDebug = <span class="keyword">true</span>;
<a name="l00317"></a>00317         }
<a name="l00318"></a>00318         
<a name="l00322"></a>00322         function debugOff()
<a name="l00323"></a>00323         {
<a name="l00324"></a>00324                 $this-&gt;bDebug = <span class="keyword">false</span>;
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326                 
<a name="l00330"></a>00330         function statusMessagesOn()
<a name="l00331"></a>00331         {
<a name="l00332"></a>00332                 $this-&gt;bStatusMessages = <span class="keyword">true</span>;
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334         
<a name="l00338"></a>00338         function statusMessagesOff()
<a name="l00339"></a>00339         {
<a name="l00340"></a>00340                 $this-&gt;bStatusMessages = <span class="keyword">false</span>;
<a name="l00341"></a>00341         }
<a name="l00342"></a>00342         
<a name="l00346"></a>00346         function waitCursorOn()
<a name="l00347"></a>00347         {
<a name="l00348"></a>00348                 $this-&gt;bWaitCursor = <span class="keyword">true</span>;
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350         
<a name="l00354"></a>00354         function waitCursorOff()
<a name="l00355"></a>00355         {
<a name="l00356"></a>00356                 $this-&gt;bWaitCursor = <span class="keyword">false</span>;
<a name="l00357"></a>00357         }       
<a name="l00358"></a>00358         
<a name="l00363"></a>00363         function exitAllowedOn()
<a name="l00364"></a>00364         {
<a name="l00365"></a>00365                 $this-&gt;bExitAllowed = <span class="keyword">true</span>;
<a name="l00366"></a>00366         }
<a name="l00367"></a>00367         
<a name="l00372"></a>00372         function exitAllowedOff()
<a name="l00373"></a>00373         {
<a name="l00374"></a>00374                 $this-&gt;bExitAllowed = <span class="keyword">false</span>;
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376         
<a name="l00382"></a>00382         function errorHandlerOn()
<a name="l00383"></a>00383         {
<a name="l00384"></a>00384                 $this-&gt;bErrorHandler = <span class="keyword">true</span>;
<a name="l00385"></a>00385         }
<a name="l00386"></a>00386 
<a name="l00390"></a>00390         function errorHandlerOff()
<a name="l00391"></a>00391         {
<a name="l00392"></a>00392                 $this-&gt;bErrorHandler = <span class="keyword">false</span>;
<a name="l00393"></a>00393         }
<a name="l00394"></a>00394         
<a name="l00401"></a>00401         function setLogFile($sFilename)
<a name="l00402"></a>00402         {
<a name="l00403"></a>00403                 $this-&gt;sLogFile = $sFilename;
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405 
<a name="l00410"></a>00410         function cleanBufferOn()
<a name="l00411"></a>00411         {
<a name="l00412"></a>00412                 $this-&gt;bCleanBuffer = <span class="keyword">true</span>;
<a name="l00413"></a>00413         }
<a name="l00417"></a>00417         function cleanBufferOff()
<a name="l00418"></a>00418         {
<a name="l00419"></a>00419                 $this-&gt;bCleanBuffer = <span class="keyword">false</span>;
<a name="l00420"></a>00420         }
<a name="l00421"></a>00421         
<a name="l00432"></a>00432         function setCharEncoding($sEncoding)
<a name="l00433"></a>00433         {
<a name="l00434"></a>00434                 $this-&gt;sEncoding = $sEncoding;
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436 
<a name="l00442"></a>00442         function decodeUTF8InputOn()
<a name="l00443"></a>00443         {
<a name="l00444"></a>00444                 $this-&gt;bDecodeUTF8Input = <span class="keyword">true</span>;
<a name="l00445"></a>00445         }
<a name="l00446"></a>00446 
<a name="l00450"></a>00450         function decodeUTF8InputOff()
<a name="l00451"></a>00451         {
<a name="l00452"></a>00452                 $this-&gt;bDecodeUTF8Input = <span class="keyword">false</span>;
<a name="l00453"></a>00453         }
<a name="l00454"></a>00454         
<a name="l00459"></a>00459         function outputEntitiesOn()
<a name="l00460"></a>00460         {
<a name="l00461"></a>00461                 $this-&gt;bOutputEntities = <span class="keyword">true</span>;
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463         
<a name="l00468"></a>00468         function outputEntitiesOff()
<a name="l00469"></a>00469         {
<a name="l00470"></a>00470                 $this-&gt;bOutputEntities = <span class="keyword">false</span>;
<a name="l00471"></a>00471         }
<a name="l00472"></a>00472                                 
<a name="l00492"></a>00492         function registerFunction($mFunction,$sRequestType=XAJAX_POST)
<a name="l00493"></a>00493         {
<a name="l00494"></a>00494                 <span class="keywordflow">if</span> (is_string($sRequestType)) {
<a name="l00495"></a>00495                         <span class="keywordflow">return</span> $this-&gt;registerExternalFunction($mFunction, $sRequestType);
<a name="l00496"></a>00496                 }
<a name="l00497"></a>00497         
<a name="l00498"></a>00498                 <span class="keywordflow">if</span> (is_array($mFunction)) {
<a name="l00499"></a>00499                         $this-&gt;aFunctions[$mFunction[0]] = 1;
<a name="l00500"></a>00500                         $this-&gt;aFunctionRequestTypes[$mFunction[0]] = $sRequestType;
<a name="l00501"></a>00501                         $this-&gt;aObjects[$mFunction[0]] = array_slice($mFunction, 1);
<a name="l00502"></a>00502                 }       
<a name="l00503"></a>00503                 <span class="keywordflow">else</span> {
<a name="l00504"></a>00504                         $this-&gt;aFunctions[$mFunction] = 1;
<a name="l00505"></a>00505                         $this-&gt;aFunctionRequestTypes[$mFunction] = $sRequestType;
<a name="l00506"></a>00506                 }
<a name="l00507"></a>00507         }
<a name="l00508"></a>00508         
<a name="l00523"></a>00523         function registerExternalFunction($mFunction,$sIncludeFile,$sRequestType=XAJAX_POST)
<a name="l00524"></a>00524         {
<a name="l00525"></a>00525                 $this-&gt;registerFunction($mFunction, $sRequestType);
<a name="l00526"></a>00526                 
<a name="l00527"></a>00527                 <span class="keywordflow">if</span> (is_array($mFunction)) {
<a name="l00528"></a>00528                         $this-&gt;aFunctionIncludeFiles[$mFunction[0]] = $sIncludeFile;
<a name="l00529"></a>00529                 }
<a name="l00530"></a>00530                 <span class="keywordflow">else</span> {
<a name="l00531"></a>00531                         $this-&gt;aFunctionIncludeFiles[$mFunction] = $sIncludeFile;
<a name="l00532"></a>00532                 }
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534         
<a name="l00549"></a>00549         function registerCatchAllFunction($mFunction)
<a name="l00550"></a>00550         {
<a name="l00551"></a>00551                 <span class="keywordflow">if</span> (is_array($mFunction)) {
<a name="l00552"></a>00552                         $this-&gt;sCatchAllFunction = $mFunction[0];
<a name="l00553"></a>00553                         $this-&gt;aObjects[$mFunction[0]] = array_slice($mFunction, 1);
<a name="l00554"></a>00554                 }
<a name="l00555"></a>00555                 <span class="keywordflow">else</span> {
<a name="l00556"></a>00556                         $this-&gt;sCatchAllFunction = $mFunction;
<a name="l00557"></a>00557                 }
<a name="l00558"></a>00558         }
<a name="l00559"></a>00559         
<a name="l00575"></a>00575         function registerPreFunction($mFunction)
<a name="l00576"></a>00576         {
<a name="l00577"></a>00577                 <span class="keywordflow">if</span> (is_array($mFunction)) {
<a name="l00578"></a>00578                         $this-&gt;sPreFunction = $mFunction[0];
<a name="l00579"></a>00579                         $this-&gt;aObjects[$mFunction[0]] = array_slice($mFunction, 1);
<a name="l00580"></a>00580                 }
<a name="l00581"></a>00581                 <span class="keywordflow">else</span> {
<a name="l00582"></a>00582                         $this-&gt;sPreFunction = $mFunction;
<a name="l00583"></a>00583                 }
<a name="l00584"></a>00584         }
<a name="l00585"></a>00585         
<a name="l00593"></a>00593         function canProcessRequests()
<a name="l00594"></a>00594         {
<a name="l00595"></a>00595                 <span class="keywordflow">if</span> ($this-&gt;getRequestMode() != -1) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00596"></a>00596                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00597"></a>00597         }
<a name="l00598"></a>00598         
<a name="l00605"></a>00605         function getRequestMode()
<a name="l00606"></a>00606         {
<a name="l00607"></a>00607                 <span class="keywordflow">if</span> (!empty($_GET[<span class="stringliteral">"xajax"</span>]))
<a name="l00608"></a>00608                         <span class="keywordflow">return</span> XAJAX_GET;
<a name="l00609"></a>00609                 
<a name="l00610"></a>00610                 <span class="keywordflow">if</span> (!empty($_POST[<span class="stringliteral">"xajax"</span>]))
<a name="l00611"></a>00611                         <span class="keywordflow">return</span> XAJAX_POST;
<a name="l00612"></a>00612                         
<a name="l00613"></a>00613                 <span class="keywordflow">return</span> -1;
<a name="l00614"></a>00614         }
<a name="l00615"></a>00615         
<a name="l00616"></a>00616         function processRequest()
<a name="l00617"></a>00617         {
<a name="l00618"></a>00618                 <span class="keywordflow">return</span> $this-&gt;processRequests();
<a name="l00619"></a>00619         }
<a name="l00620"></a>00620         
<a name="l00629"></a>00629         function processRequests()
<a name="l00630"></a>00630         {       
<a name="l00631"></a>00631                 
<a name="l00632"></a>00632                 $requestMode = -1;
<a name="l00633"></a>00633                 $sFunctionName = <span class="stringliteral">""</span>;
<a name="l00634"></a>00634                 $bFoundFunction = <span class="keyword">true</span>;
<a name="l00635"></a>00635                 $bFunctionIsCatchAll = <span class="keyword">false</span>;
<a name="l00636"></a>00636                 $sFunctionNameForSpecial = <span class="stringliteral">""</span>;
<a name="l00637"></a>00637                 $aArgs = array();
<a name="l00638"></a>00638                 $sPreResponse = <span class="stringliteral">""</span>;
<a name="l00639"></a>00639                 $bEndRequest = <span class="keyword">false</span>;
<a name="l00640"></a>00640                 
<a name="l00641"></a>00641                 $requestMode = $this-&gt;getRequestMode();
<a name="l00642"></a>00642                 <span class="keywordflow">if</span> ($requestMode == -1) <span class="keywordflow">return</span>;
<a name="l00643"></a>00643         
<a name="l00644"></a>00644                 <span class="keywordflow">if</span> ($requestMode == XAJAX_POST)
<a name="l00645"></a>00645                 {
<a name="l00646"></a>00646                         $sFunctionName = $_POST[<span class="stringliteral">"xajax"</span>];
<a name="l00647"></a>00647                         
<a name="l00648"></a>00648                         <span class="keywordflow">if</span> (!empty($_POST[<span class="stringliteral">"xajaxargs"</span>])) 
<a name="l00649"></a>00649                                 $aArgs = $_POST[<span class="stringliteral">"xajaxargs"</span>];
<a name="l00650"></a>00650                 }
<a name="l00651"></a>00651                 <span class="keywordflow">else</span>
<a name="l00652"></a>00652                 {       
<a name="l00653"></a>00653                         header (<span class="stringliteral">"Expires: Mon, 26 Jul 1997 05:00:00 GMT"</span>);
<a name="l00654"></a>00654                         header (<span class="stringliteral">"Last-Modified: "</span> . gmdate(<span class="stringliteral">"D, d M Y H:i:s"</span>) . <span class="stringliteral">" GMT"</span>);
<a name="l00655"></a>00655                         header (<span class="stringliteral">"Cache-Control: no-cache, must-revalidate"</span>);
<a name="l00656"></a>00656                         header (<span class="stringliteral">"Pragma: no-cache"</span>);
<a name="l00657"></a>00657                         
<a name="l00658"></a>00658                         $sFunctionName = $_GET[<span class="stringliteral">"xajax"</span>];
<a name="l00659"></a>00659                         
<a name="l00660"></a>00660                         <span class="keywordflow">if</span> (!empty($_GET[<span class="stringliteral">"xajaxargs"</span>])) 
<a name="l00661"></a>00661                                 $aArgs = $_GET[<span class="stringliteral">"xajaxargs"</span>];
<a name="l00662"></a>00662                 }
<a name="l00663"></a>00663                 
<a name="l00664"></a>00664                 <span class="comment">// Use xajax error handler if necessary</span>
<a name="l00665"></a>00665                 <span class="keywordflow">if</span> ($this-&gt;bErrorHandler) {
<a name="l00666"></a>00666                         $GLOBALS[<span class="stringliteral">'xajaxErrorHandlerText'</span>] = <span class="stringliteral">""</span>;
<a name="l00667"></a>00667                         set_error_handler(<span class="stringliteral">"xajaxErrorHandler"</span>);
<a name="l00668"></a>00668                 }
<a name="l00669"></a>00669                 
<a name="l00670"></a>00670                 <span class="keywordflow">if</span> ($this-&gt;sPreFunction) {
<a name="l00671"></a>00671                         <span class="keywordflow">if</span> (!$this-&gt;_isFunctionCallable($this-&gt;sPreFunction)) {
<a name="l00672"></a>00672                                 $bFoundFunction = <span class="keyword">false</span>;
<a name="l00673"></a>00673                                 $oResponse = <span class="keyword">new</span> xajaxResponse();
<a name="l00674"></a>00674                                 $oResponse-&gt;addAlert(<span class="stringliteral">"Unknown Pre-Function "</span>. $this-&gt;sPreFunction);
<a name="l00675"></a>00675                         }
<a name="l00676"></a>00676                 }
<a name="l00677"></a>00677                 <span class="comment">//include any external dependencies associated with this function name</span>
<a name="l00678"></a>00678                 <span class="keywordflow">if</span> (array_key_exists($sFunctionName,$this-&gt;aFunctionIncludeFiles))
<a name="l00679"></a>00679                 {
<a name="l00680"></a>00680                         ob_start();
<a name="l00681"></a>00681                         include_once($this-&gt;aFunctionIncludeFiles[$sFunctionName]);
<a name="l00682"></a>00682                         ob_end_clean();
<a name="l00683"></a>00683                 }
<a name="l00684"></a>00684                 
<a name="l00685"></a>00685                 <span class="keywordflow">if</span> ($bFoundFunction) {
<a name="l00686"></a>00686                         $sFunctionNameForSpecial = $sFunctionName;
<a name="l00687"></a>00687                         <span class="keywordflow">if</span> (!array_key_exists($sFunctionName, $this-&gt;aFunctions))
<a name="l00688"></a>00688                         {
<a name="l00689"></a>00689                                 <span class="keywordflow">if</span> ($this-&gt;sCatchAllFunction) {
<a name="l00690"></a>00690                                         $sFunctionName = $this-&gt;sCatchAllFunction;
<a name="l00691"></a>00691                                         $bFunctionIsCatchAll = <span class="keyword">true</span>;
<a name="l00692"></a>00692                                 }
<a name="l00693"></a>00693                                 <span class="keywordflow">else</span> {
<a name="l00694"></a>00694                                         $bFoundFunction = <span class="keyword">false</span>;
<a name="l00695"></a>00695                                         $oResponse = <span class="keyword">new</span> xajaxResponse();
<a name="l00696"></a>00696                                         $oResponse-&gt;addAlert(<span class="stringliteral">"Unknown Function $sFunctionName."</span>);
<a name="l00697"></a>00697                                 }
<a name="l00698"></a>00698                         }
<a name="l00699"></a>00699                 }
<a name="l00700"></a>00700                 
<a name="l00701"></a>00701                 <span class="keywordflow">if</span> ($bFoundFunction)
<a name="l00702"></a>00702                 {
<a name="l00703"></a>00703                         <span class="keywordflow">for</span> ($i = 0; $i &lt; <span class="keyword">sizeof</span>($aArgs); $i++)
<a name="l00704"></a>00704                         {
<a name="l00705"></a>00705                                 <span class="comment">// If magic quotes is on, then we need to strip the slashes from the args</span>
<a name="l00706"></a>00706                                 <span class="keywordflow">if</span> (get_magic_quotes_gpc() == 1 &amp;&amp; is_string($aArgs[$i])) {
<a name="l00707"></a>00707                                 
<a name="l00708"></a>00708                                         $aArgs[$i] = stripslashes($aArgs[$i]);
<a name="l00709"></a>00709                                 }
<a name="l00710"></a>00710                                 <span class="keywordflow">if</span> (stristr($aArgs[$i],<span class="stringliteral">"&lt;xjxobj&gt;"</span>) != <span class="keyword">false</span>)
<a name="l00711"></a>00711                                 {
<a name="l00712"></a>00712                                         $aArgs[$i] = $this-&gt;_xmlToArray(<span class="stringliteral">"xjxobj"</span>,$aArgs[$i]);   
<a name="l00713"></a>00713                                 }
<a name="l00714"></a>00714                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stristr($aArgs[$i],<span class="stringliteral">"&lt;xjxquery&gt;"</span>) != <span class="keyword">false</span>)
<a name="l00715"></a>00715                                 {
<a name="l00716"></a>00716                                         $aArgs[$i] = $this-&gt;_xmlToArray(<span class="stringliteral">"xjxquery"</span>,$aArgs[$i]); 
<a name="l00717"></a>00717                                 }
<a name="l00718"></a>00718                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($this-&gt;bDecodeUTF8Input)
<a name="l00719"></a>00719                                 {
<a name="l00720"></a>00720                                         $aArgs[$i] = $this-&gt;_decodeUTF8Data($aArgs[$i]);        
<a name="l00721"></a>00721                                 }
<a name="l00722"></a>00722                         }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724                         <span class="keywordflow">if</span> ($this-&gt;sPreFunction) {
<a name="l00725"></a>00725                                 $mPreResponse = $this-&gt;_callFunction($this-&gt;sPreFunction, array($sFunctionNameForSpecial, $aArgs));
<a name="l00726"></a>00726                                 <span class="keywordflow">if</span> (is_array($mPreResponse) &amp;&amp; $mPreResponse[0] === <span class="keyword">false</span>) {
<a name="l00727"></a>00727                                         $bEndRequest = <span class="keyword">true</span>;
<a name="l00728"></a>00728                                         $sPreResponse = $mPreResponse[1];
<a name="l00729"></a>00729                                 }
<a name="l00730"></a>00730                                 <span class="keywordflow">else</span> {
<a name="l00731"></a>00731                                         $sPreResponse = $mPreResponse;
<a name="l00732"></a>00732                                 }
<a name="l00733"></a>00733                                 <span class="keywordflow">if</span> ($bEndRequest) $oResponse = $sPreResponse;
<a name="l00734"></a>00734                         }
<a name="l00735"></a>00735                         
<a name="l00736"></a>00736                         <span class="keywordflow">if</span> (!$bEndRequest) {
<a name="l00737"></a>00737                                 <span class="keywordflow">if</span> (!$this-&gt;_isFunctionCallable($sFunctionName)) {
<a name="l00738"></a>00738                                         $oResponse = <span class="keyword">new</span> xajaxResponse();
<a name="l00739"></a>00739                                         $oResponse-&gt;addAlert(<span class="stringliteral">"The Registered Function $sFunctionName Could Not Be Found."</span>);
<a name="l00740"></a>00740                                 }
<a name="l00741"></a>00741                                 <span class="keywordflow">else</span> {
<a name="l00742"></a>00742                                         <span class="keywordflow">if</span> ($bFunctionIsCatchAll) {
<a name="l00743"></a>00743                                                 $aArgs = array($sFunctionNameForSpecial, $aArgs);
<a name="l00744"></a>00744                                         }
<a name="l00745"></a>00745                                         $oResponse = $this-&gt;_callFunction($sFunctionName, $aArgs);
<a name="l00746"></a>00746                                 }
<a name="l00747"></a>00747                                 <span class="keywordflow">if</span> (is_string($sResponse)) {
<a name="l00748"></a>00748                                         $oResponse = <span class="keyword">new</span> xajaxResponse();
<a name="l00749"></a>00749                                         $oResponse-&gt;addAlert(<span class="stringliteral">"No XML Response Was Returned By Function $sFunctionName.\n\nOutput: "</span>.$oResponse);
<a name="l00750"></a>00750                                 }
<a name="l00751"></a>00751                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($sPreResponse != <span class="stringliteral">""</span>) {
<a name="l00752"></a>00752                                         $oNewResponse = <span class="keyword">new</span> xajaxResponse($this-&gt;sEncoding, $this-&gt;bOutputEntities);
<a name="l00753"></a>00753                                         $oNewResponse-&gt;loadXML($sPreResponse);
<a name="l00754"></a>00754                                         $oNewResponse-&gt;loadXML($oResponse);
<a name="l00755"></a>00755                                         $oResponse = $sNewResponse;
<a name="l00756"></a>00756                                 }
<a name="l00757"></a>00757                         }
<a name="l00758"></a>00758                 }
<a name="l00759"></a>00759                 
<a name="l00760"></a>00760                 $sContentHeader = <span class="stringliteral">"Content-type: text/xml;"</span>;
<a name="l00761"></a>00761                 <span class="keywordflow">if</span> ($this-&gt;sEncoding &amp;&amp; strlen(trim($this-&gt;sEncoding)) &gt; 0)
<a name="l00762"></a>00762                         $sContentHeader .= <span class="stringliteral">" charset="</span>.$this-&gt;sEncoding;
<a name="l00763"></a>00763                 header($sContentHeader);
<a name="l00764"></a>00764                 <span class="keywordflow">if</span> ($this-&gt;bErrorHandler &amp;&amp; !empty( $GLOBALS[<span class="stringliteral">'xajaxErrorHandlerText'</span>] )) {
<a name="l00765"></a>00765                         $oErrorResponse = <span class="keyword">new</span> xajaxResponse();
<a name="l00766"></a>00766                         $oErrorResponse-&gt;addAlert(<span class="stringliteral">"** PHP Error Messages: **"</span> . $GLOBALS[<span class="stringliteral">'xajaxErrorHandlerText'</span>]);
<a name="l00767"></a>00767                         <span class="keywordflow">if</span> ($this-&gt;sLogFile) {
<a name="l00768"></a>00768                                 $fH = @fopen($this-&gt;sLogFile, <span class="stringliteral">"a"</span>);
<a name="l00769"></a>00769                                 <span class="keywordflow">if</span> (!$fH) {
<a name="l00770"></a>00770                                         $oErrorResponse-&gt;addAlert(<span class="stringliteral">"** Logging Error **\n\nxajax was unable to write to the error log file:\n"</span> . $this-&gt;sLogFile);
<a name="l00771"></a>00771                                 }
<a name="l00772"></a>00772                                 <span class="keywordflow">else</span> {
<a name="l00773"></a>00773                                         fwrite($fH, <span class="stringliteral">"** xajax Error Log - "</span> . strftime(<span class="stringliteral">"%b %e %Y %I:%M:%S %p"</span>) . <span class="stringliteral">" **"</span> . $GLOBALS[<span class="stringliteral">'xajaxErrorHandlerText'</span>] . <span class="stringliteral">"\n\n\n"</span>);
<a name="l00774"></a>00774                                         fclose($fH);
<a name="l00775"></a>00775                                 }
<a name="l00776"></a>00776                         }
<a name="l00777"></a>00777 
<a name="l00778"></a>00778                         $oErrorResponse-&gt;loadXML($oResponse);
<a name="l00779"></a>00779                         $oResponse = $oErrorResponse;
<a name="l00780"></a>00780                         
<a name="l00781"></a>00781                 }
<a name="l00782"></a>00782                 <span class="keywordflow">if</span> ($this-&gt;bCleanBuffer) <span class="keywordflow">while</span> (@ob_end_clean());
<a name="l00783"></a>00783                 print $oResponse-&gt;getOutput();
<a name="l00784"></a>00784                 <span class="keywordflow">if</span> ($this-&gt;bErrorHandler) restore_error_handler();
<a name="l00785"></a>00785                 
<a name="l00786"></a>00786                 <span class="keywordflow">if</span> ($this-&gt;bExitAllowed)
<a name="l00787"></a>00787                         exit();
<a name="l00788"></a>00788         }
<a name="l00789"></a>00789 
<a name="l00815"></a>00815         function printJavascript($sJsURI=<span class="stringliteral">""</span>, $sJsFile=NULL)
<a name="l00816"></a>00816         {
<a name="l00817"></a>00817                 print $this-&gt;getJavascript($sJsURI, $sJsFile);
<a name="l00818"></a>00818         }
<a name="l00819"></a>00819         
<a name="l00844"></a>00844         function getJavascript($sJsURI=<span class="stringliteral">""</span>, $sJsFile=NULL)
<a name="l00845"></a>00845         {       
<a name="l00846"></a>00846                 $html = $this-&gt;getJavascriptConfig();
<a name="l00847"></a>00847                 $html .= $this-&gt;getJavascriptInclude($sJsURI, $sJsFile);
<a name="l00848"></a>00848                 
<a name="l00849"></a>00849                 <span class="keywordflow">return</span> $html;
<a name="l00850"></a>00850         }
<a name="l00851"></a>00851         
<a name="l00858"></a>00858         function getJavascriptConfig()
<a name="l00859"></a>00859         {
<a name="l00860"></a>00860                 $html  = <span class="stringliteral">"\t&lt;script type=\"text/javascript\"&gt;\n"</span>;
<a name="l00861"></a>00861                 $html .= <span class="stringliteral">"var xajaxRequestUri=\""</span>.$this-&gt;sRequestURI.<span class="stringliteral">"\";\n"</span>;
<a name="l00862"></a>00862                 $html .= <span class="stringliteral">"var xajaxDebug="</span>.($this-&gt;bDebug?<span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span>).<span class="stringliteral">";\n"</span>;
<a name="l00863"></a>00863                 $html .= <span class="stringliteral">"var xajaxStatusMessages="</span>.($this-&gt;bStatusMessages?<span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span>).<span class="stringliteral">";\n"</span>;
<a name="l00864"></a>00864                 $html .= <span class="stringliteral">"var xajaxWaitCursor="</span>.($this-&gt;bWaitCursor?<span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span>).<span class="stringliteral">";\n"</span>;
<a name="l00865"></a>00865                 $html .= <span class="stringliteral">"var xajaxDefinedGet="</span>.XAJAX_GET.<span class="stringliteral">";\n"</span>;
<a name="l00866"></a>00866                 $html .= <span class="stringliteral">"var xajaxDefinedPost="</span>.XAJAX_POST.<span class="stringliteral">";\n"</span>;
<a name="l00867"></a>00867                 $html .= <span class="stringliteral">"var xajaxLoaded=false;\n"</span>;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869                 <span class="keywordflow">foreach</span>($this-&gt;aFunctions as $sFunction =&gt; $bExists) {
<a name="l00870"></a>00870                         $html .= $this-&gt;_wrap($sFunction,$this-&gt;aFunctionRequestTypes[$sFunction]);
<a name="l00871"></a>00871                 }
<a name="l00872"></a>00872 
<a name="l00873"></a>00873                 $html .= <span class="stringliteral">"\t&lt;/script&gt;\n"</span>;
<a name="l00874"></a>00874                 <span class="keywordflow">return</span> $html;           
<a name="l00875"></a>00875         }
<a name="l00876"></a>00876         
<a name="l00894"></a>00894         function getJavascriptInclude($sJsURI=<span class="stringliteral">""</span>, $sJsFile=NULL)
<a name="l00895"></a>00895         {
<a name="l00896"></a>00896                 <span class="keywordflow">if</span> ($sJsFile == NULL) $sJsFile = <span class="stringliteral">"xajax_js/xajax.js"</span>;
<a name="l00897"></a>00897                         
<a name="l00898"></a>00898                 <span class="keywordflow">if</span> ($sJsURI != <span class="stringliteral">""</span> &amp;&amp; substr($sJsURI, -1) != <span class="stringliteral">"/"</span>) $sJsURI .= <span class="stringliteral">"/"</span>;
<a name="l00899"></a>00899                 
<a name="l00900"></a>00900                 $html = <span class="stringliteral">"\t&lt;script type=\"text/javascript\" src=\""</span> . $sJsURI . $sJsFile . <span class="stringliteral">"\"&gt;&lt;/script&gt;\n"</span>;
<a name="l00901"></a>00901                 <span class="keywordflow">if</span> ($this-&gt;iTimeout != 0)
<a name="l00902"></a>00902                 {
<a name="l00903"></a>00903                         $html .= <span class="stringliteral">"\t&lt;script type=\"text/javascript\"&gt;\n"</span>;
<a name="l00904"></a>00904                         $html .= <span class="stringliteral">"window.setTimeout(function () { if (!xajaxLoaded) { alert('Error: the xajax Javascript file could not be included. Perhaps the URL is incorrect?\\nURL: {$sJsURI}{$sJsFile}'); } }, "</span>.$this-&gt;iTimeout.<span class="stringliteral">");\n"</span>;
<a name="l00905"></a>00905                         $html .= <span class="stringliteral">"\t&lt;/script&gt;\n"</span>;
<a name="l00906"></a>00906                 }
<a name="l00907"></a>00907                 <span class="keywordflow">return</span> $html;
<a name="l00908"></a>00908         }
<a name="l00909"></a>00909 
<a name="l00918"></a>00918         function autoCompressJavascript($sJsFullFilename=NULL)
<a name="l00919"></a>00919         {       
<a name="l00920"></a>00920                 $sJsFile = <span class="stringliteral">"xajax_js/xajax.js"</span>;
<a name="l00921"></a>00921                 
<a name="l00922"></a>00922                 <span class="keywordflow">if</span> ($sJsFullFilename) {
<a name="l00923"></a>00923                         $realJsFile = $sJsFullFilename;
<a name="l00924"></a>00924                 }
<a name="l00925"></a>00925                 <span class="keywordflow">else</span> {
<a name="l00926"></a>00926                         $realPath = realpath(dirname(__FILE__));
<a name="l00927"></a>00927                         $realJsFile = $realPath . <span class="stringliteral">"/"</span>. $sJsFile;
<a name="l00928"></a>00928                 }
<a name="l00929"></a>00929 
<a name="l00930"></a>00930                 <span class="comment">// Create a compressed file if necessary</span>
<a name="l00931"></a>00931                 <span class="keywordflow">if</span> (!file_exists($realJsFile)) {
<a name="l00932"></a>00932                         $srcFile = str_replace(<span class="stringliteral">".js"</span>, <span class="stringliteral">"_uncompressed.js"</span>, $realJsFile);
<a name="l00933"></a>00933                         <span class="keywordflow">if</span> (!file_exists($srcFile)) {
<a name="l00934"></a>00934                                 trigger_error(<span class="stringliteral">"The xajax uncompressed Javascript file could not be found in the &lt;b&gt;"</span> . dirname($realJsFile) . <span class="stringliteral">"&lt;/b&gt; folder. Error "</span>, E_USER_ERROR);     
<a name="l00935"></a>00935                         }
<a name="l00936"></a>00936                         require(dirname(__FILE__).<span class="stringliteral">"/xajaxCompress.php"</span>);
<a name="l00937"></a>00937                         $javaScript = implode(<span class="stringliteral">''</span>, file($srcFile));
<a name="l00938"></a>00938                         $compressedScript = xajaxCompressJavascript($javaScript);
<a name="l00939"></a>00939                         $fH = @fopen($realJsFile, <span class="stringliteral">"w"</span>);
<a name="l00940"></a>00940                         <span class="keywordflow">if</span> (!$fH) {
<a name="l00941"></a>00941                                 trigger_error(<span class="stringliteral">"The xajax compressed javascript file could not be written in the &lt;b&gt;"</span> . dirname($realJsFile) . <span class="stringliteral">"&lt;/b&gt; folder. Error "</span>, E_USER_ERROR);
<a name="l00942"></a>00942                         }
<a name="l00943"></a>00943                         <span class="keywordflow">else</span> {
<a name="l00944"></a>00944                                 fwrite($fH, $compressedScript);
<a name="l00945"></a>00945                                 fclose($fH);
<a name="l00946"></a>00946                         }
<a name="l00947"></a>00947                 }
<a name="l00948"></a>00948         }
<a name="l00949"></a>00949         
<a name="l00956"></a>00956         function _detectURI() {
<a name="l00957"></a>00957                 $aURL = array();
<a name="l00958"></a>00958 
<a name="l00959"></a>00959                 <span class="comment">// Try to get the request URL</span>
<a name="l00960"></a>00960                 <span class="keywordflow">if</span> (!empty($_SERVER[<span class="stringliteral">'REQUEST_URI'</span>])) {
<a name="l00961"></a>00961                         $_SERVER[<span class="stringliteral">'REQUEST_URI'</span>] = str_replace(array(<span class="charliteral">'"'</span>,<span class="stringliteral">"'"</span>,<span class="charliteral">'&lt;'</span>,<span class="charliteral">'&gt;'</span>), array(<span class="stringliteral">'%22'</span>,<span class="stringliteral">'%27'</span>,<span class="stringliteral">'%3C'</span>,<span class="stringliteral">'%3E'</span>), $_SERVER[<span class="stringliteral">'REQUEST_URI'</span>]);
<a name="l00962"></a>00962                         $aURL = parse_url($_SERVER[<span class="stringliteral">'REQUEST_URI'</span>]);
<a name="l00963"></a>00963                 }
<a name="l00964"></a>00964 
<a name="l00965"></a>00965                 <span class="comment">// Fill in the empty values</span>
<a name="l00966"></a>00966                 <span class="keywordflow">if</span> (empty($aURL[<span class="stringliteral">'scheme'</span>])) {
<a name="l00967"></a>00967                         <span class="keywordflow">if</span> (!empty($_SERVER[<span class="stringliteral">'HTTP_SCHEME'</span>])) {
<a name="l00968"></a>00968                                 $aURL[<span class="stringliteral">'scheme'</span>] = $_SERVER[<span class="stringliteral">'HTTP_SCHEME'</span>];
<a name="l00969"></a>00969                         } <span class="keywordflow">else</span> {
<a name="l00970"></a>00970                                 $aURL[<span class="stringliteral">'scheme'</span>] = (!empty($_SERVER[<span class="stringliteral">'HTTPS'</span>]) &amp;&amp; strtolower($_SERVER[<span class="stringliteral">'HTTPS'</span>]) != <span class="stringliteral">'off'</span>) ? <span class="stringliteral">'https'</span> : <span class="stringliteral">'http'</span>;
<a name="l00971"></a>00971                         }
<a name="l00972"></a>00972                 }
<a name="l00973"></a>00973 
<a name="l00974"></a>00974                 <span class="keywordflow">if</span> (empty($aURL[<span class="stringliteral">'host'</span>])) {
<a name="l00975"></a>00975                         <span class="keywordflow">if</span> (!empty($_SERVER[<span class="stringliteral">'HTTP_X_FORWARDED_HOST'</span>])) {
<a name="l00976"></a>00976                                 <span class="keywordflow">if</span> (strpos($_SERVER[<span class="stringliteral">'HTTP_X_FORWARDED_HOST'</span>], <span class="charliteral">':'</span>) &gt; 0) {
<a name="l00977"></a>00977                                         list($aURL[<span class="stringliteral">'host'</span>], $aURL[<span class="stringliteral">'port'</span>]) = explode(<span class="charliteral">':'</span>, $_SERVER[<span class="stringliteral">'HTTP_X_FORWARDED_HOST'</span>]);
<a name="l00978"></a>00978                                 } <span class="keywordflow">else</span> {
<a name="l00979"></a>00979                                         $aURL[<span class="stringliteral">'host'</span>] = $_SERVER[<span class="stringliteral">'HTTP_X_FORWARDED_HOST'</span>];
<a name="l00980"></a>00980                                 }
<a name="l00981"></a>00981                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!empty($_SERVER[<span class="stringliteral">'HTTP_HOST'</span>])) {
<a name="l00982"></a>00982                                 <span class="keywordflow">if</span> (strpos($_SERVER[<span class="stringliteral">'HTTP_HOST'</span>], <span class="charliteral">':'</span>) &gt; 0) {
<a name="l00983"></a>00983                                         list($aURL[<span class="stringliteral">'host'</span>], $aURL[<span class="stringliteral">'port'</span>]) = explode(<span class="charliteral">':'</span>, $_SERVER[<span class="stringliteral">'HTTP_HOST'</span>]);
<a name="l00984"></a>00984                                 } <span class="keywordflow">else</span> {
<a name="l00985"></a>00985                                         $aURL[<span class="stringliteral">'host'</span>] = $_SERVER[<span class="stringliteral">'HTTP_HOST'</span>];
<a name="l00986"></a>00986                                 }
<a name="l00987"></a>00987                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!empty($_SERVER[<span class="stringliteral">'SERVER_NAME'</span>])) {
<a name="l00988"></a>00988                                 $aURL[<span class="stringliteral">'host'</span>] = $_SERVER[<span class="stringliteral">'SERVER_NAME'</span>];
<a name="l00989"></a>00989                         } <span class="keywordflow">else</span> {
<a name="l00990"></a>00990                                 print <span class="stringliteral">"xajax Error: xajax failed to automatically identify your Request URI."</span>;
<a name="l00991"></a>00991                                 print <span class="stringliteral">"Please set the Request URI explicitly when you instantiate the xajax object."</span>;
<a name="l00992"></a>00992                                 exit();
<a name="l00993"></a>00993                         }
<a name="l00994"></a>00994                 }
<a name="l00995"></a>00995 
<a name="l00996"></a>00996                 <span class="keywordflow">if</span> (empty($aURL[<span class="stringliteral">'port'</span>]) &amp;&amp; !empty($_SERVER[<span class="stringliteral">'SERVER_PORT'</span>])) {
<a name="l00997"></a>00997                         $aURL[<span class="stringliteral">'port'</span>] = $_SERVER[<span class="stringliteral">'SERVER_PORT'</span>];
<a name="l00998"></a>00998                 }
<a name="l00999"></a>00999 
<a name="l01000"></a>01000                 <span class="keywordflow">if</span> (empty($aURL[<span class="stringliteral">'path'</span>])) {
<a name="l01001"></a>01001                         <span class="keywordflow">if</span> (!empty($_SERVER[<span class="stringliteral">'PATH_INFO'</span>])) {
<a name="l01002"></a>01002                                 $sPath = parse_url($_SERVER[<span class="stringliteral">'PATH_INFO'</span>]);
<a name="l01003"></a>01003                         } <span class="keywordflow">else</span> {
<a name="l01004"></a>01004                                 $sPath = parse_url($_SERVER[<span class="stringliteral">'PHP_SELF'</span>]);
<a name="l01005"></a>01005                         }
<a name="l01006"></a>01006                         $aURL[<span class="stringliteral">'path'</span>] = str_replace(array(<span class="charliteral">'"'</span>,<span class="stringliteral">"'"</span>,<span class="charliteral">'&lt;'</span>,<span class="charliteral">'&gt;'</span>), array(<span class="stringliteral">'%22'</span>,<span class="stringliteral">'%27'</span>,<span class="stringliteral">'%3C'</span>,<span class="stringliteral">'%3E'</span>), $sPath[<span class="stringliteral">'path'</span>]);
<a name="l01007"></a>01007                         unset($sPath);
<a name="l01008"></a>01008                 }
<a name="l01009"></a>01009 
<a name="l01010"></a>01010                 <span class="keywordflow">if</span> (!empty($aURL[<span class="stringliteral">'query'</span>])) {
<a name="l01011"></a>01011                         $aURL[<span class="stringliteral">'query'</span>] = <span class="charliteral">'?'</span>.$aURL[<span class="stringliteral">'query'</span>];
<a name="l01012"></a>01012                 }
<a name="l01013"></a>01013 
<a name="l01014"></a>01014                 <span class="comment">// Build the URL: Start with scheme, user and pass</span>
<a name="l01015"></a>01015                 $sURL = $aURL[<span class="stringliteral">'scheme'</span>].<span class="stringliteral">'://'</span>;
<a name="l01016"></a>01016                 <span class="keywordflow">if</span> (!empty($aURL[<span class="stringliteral">'user'</span>])) {
<a name="l01017"></a>01017                         $sURL.= $aURL[<span class="stringliteral">'user'</span>];
<a name="l01018"></a>01018                         <span class="keywordflow">if</span> (!empty($aURL[<span class="stringliteral">'pass'</span>])) {
<a name="l01019"></a>01019                                 $sURL.= <span class="charliteral">':'</span>.$aURL[<span class="stringliteral">'pass'</span>];
<a name="l01020"></a>01020                         }
<a name="l01021"></a>01021                         $sURL.= <span class="charliteral">'@'</span>;
<a name="l01022"></a>01022                 }
<a name="l01023"></a>01023 
<a name="l01024"></a>01024                 <span class="comment">// Add the host</span>
<a name="l01025"></a>01025                 $sURL.= $aURL[<span class="stringliteral">'host'</span>];
<a name="l01026"></a>01026 
<a name="l01027"></a>01027                 <span class="comment">// Add the port if needed</span>
<a name="l01028"></a>01028                 <span class="keywordflow">if</span> (!empty($aURL[<span class="stringliteral">'port'</span>]) &amp;&amp; (($aURL[<span class="stringliteral">'scheme'</span>] == <span class="stringliteral">'http'</span> &amp;&amp; $aURL[<span class="stringliteral">'port'</span>] != 80) || ($aURL[<span class="stringliteral">'scheme'</span>] == <span class="stringliteral">'https'</span> &amp;&amp; $aURL[<span class="stringliteral">'port'</span>] != 443))) {
<a name="l01029"></a>01029                         $sURL.= <span class="charliteral">':'</span>.$aURL[<span class="stringliteral">'port'</span>];
<a name="l01030"></a>01030                 }
<a name="l01031"></a>01031 
<a name="l01032"></a>01032                 <span class="comment">// Add the path and the query string</span>
<a name="l01033"></a>01033                 $sURL.= $aURL[<span class="stringliteral">'path'</span>].@$aURL[<span class="stringliteral">'query'</span>];
<a name="l01034"></a>01034 
<a name="l01035"></a>01035                 <span class="comment">// Clean up</span>
<a name="l01036"></a>01036                 unset($aURL);
<a name="l01037"></a>01037                 <span class="keywordflow">return</span> $sURL;
<a name="l01038"></a>01038         }
<a name="l01039"></a>01039         
<a name="l01048"></a>01048         function _isObjectCallback($sFunction)
<a name="l01049"></a>01049         {
<a name="l01050"></a>01050                 <span class="keywordflow">if</span> (array_key_exists($sFunction, $this-&gt;aObjects)) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01051"></a>01051                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01052"></a>01052         }
<a name="l01053"></a>01053         
<a name="l01062"></a>01062         function _isFunctionCallable($sFunction)
<a name="l01063"></a>01063         {
<a name="l01064"></a>01064                 <span class="keywordflow">if</span> ($this-&gt;_isObjectCallback($sFunction)) {
<a name="l01065"></a>01065                         <span class="keywordflow">if</span> (is_object($this-&gt;aObjects[$sFunction][0])) {
<a name="l01066"></a>01066                                 <span class="keywordflow">return</span> method_exists($this-&gt;aObjects[$sFunction][0], $this-&gt;aObjects[$sFunction][1]);
<a name="l01067"></a>01067                         }
<a name="l01068"></a>01068                         <span class="keywordflow">else</span> {
<a name="l01069"></a>01069                                 <span class="keywordflow">return</span> is_callable($this-&gt;aObjects[$sFunction]);
<a name="l01070"></a>01070                         }
<a name="l01071"></a>01071                 }
<a name="l01072"></a>01072                 <span class="keywordflow">else</span> {
<a name="l01073"></a>01073                         <span class="keywordflow">return</span> function_exists($sFunction);
<a name="l01074"></a>01074                 }       
<a name="l01075"></a>01075         }
<a name="l01076"></a>01076         
<a name="l01086"></a>01086         function _callFunction($sFunction, $aArgs)
<a name="l01087"></a>01087         {
<a name="l01088"></a>01088                 <span class="keywordflow">if</span> ($this-&gt;_isObjectCallback($sFunction)) {
<a name="l01089"></a>01089                         $mReturn = call_user_func_array($this-&gt;aObjects[$sFunction], $aArgs);
<a name="l01090"></a>01090                 }
<a name="l01091"></a>01091                 <span class="keywordflow">else</span> {
<a name="l01092"></a>01092                         $mReturn = call_user_func_array($sFunction, $aArgs);
<a name="l01093"></a>01093                 }
<a name="l01094"></a>01094                 <span class="keywordflow">return</span> $mReturn;
<a name="l01095"></a>01095         }
<a name="l01096"></a>01096         
<a name="l01105"></a>01105         function _wrap($sFunction,$sRequestType=XAJAX_POST)
<a name="l01106"></a>01106         {
<a name="l01107"></a>01107                 $js = <span class="stringliteral">"function "</span>.$this-&gt;sWrapperPrefix.<span class="stringliteral">"$sFunction(){return xajax.call(\"$sFunction\", arguments, "</span>.$sRequestType.<span class="stringliteral">");}\n"</span>;             
<a name="l01108"></a>01108                 <span class="keywordflow">return</span> $js;
<a name="l01109"></a>01109         }
<a name="l01110"></a>01110 
<a name="l01121"></a>01121         function _xmlToArray($rootTag, $sXml)
<a name="l01122"></a>01122         {
<a name="l01123"></a>01123                 $aArray = array();
<a name="l01124"></a>01124                 $sXml = str_replace(<span class="stringliteral">"&lt;$rootTag&gt;"</span>,<span class="stringliteral">"&lt;$rootTag&gt;|~|"</span>,$sXml);
<a name="l01125"></a>01125                 $sXml = str_replace(<span class="stringliteral">"&lt;/$rootTag&gt;"</span>,<span class="stringliteral">"&lt;/$rootTag&gt;|~|"</span>,$sXml);
<a name="l01126"></a>01126                 $sXml = str_replace(<span class="stringliteral">"&lt;e&gt;"</span>,<span class="stringliteral">"&lt;e&gt;|~|"</span>,$sXml);
<a name="l01127"></a>01127                 $sXml = str_replace(<span class="stringliteral">"&lt;/e&gt;"</span>,<span class="stringliteral">"&lt;/e&gt;|~|"</span>,$sXml);
<a name="l01128"></a>01128                 $sXml = str_replace(<span class="stringliteral">"&lt;k&gt;"</span>,<span class="stringliteral">"&lt;k&gt;|~|"</span>,$sXml);
<a name="l01129"></a>01129                 $sXml = str_replace(<span class="stringliteral">"&lt;/k&gt;"</span>,<span class="stringliteral">"|~|&lt;/k&gt;|~|"</span>,$sXml);
<a name="l01130"></a>01130                 $sXml = str_replace(<span class="stringliteral">"&lt;v&gt;"</span>,<span class="stringliteral">"&lt;v&gt;|~|"</span>,$sXml);
<a name="l01131"></a>01131                 $sXml = str_replace(<span class="stringliteral">"&lt;/v&gt;"</span>,<span class="stringliteral">"|~|&lt;/v&gt;|~|"</span>,$sXml);
<a name="l01132"></a>01132                 $sXml = str_replace(<span class="stringliteral">"&lt;q&gt;"</span>,<span class="stringliteral">"&lt;q&gt;|~|"</span>,$sXml);
<a name="l01133"></a>01133                 $sXml = str_replace(<span class="stringliteral">"&lt;/q&gt;"</span>,<span class="stringliteral">"|~|&lt;/q&gt;|~|"</span>,$sXml);
<a name="l01134"></a>01134                 
<a name="l01135"></a>01135                 $this-&gt;aObjArray = explode(<span class="stringliteral">"|~|"</span>,$sXml);
<a name="l01136"></a>01136                 
<a name="l01137"></a>01137                 $this-&gt;iPos = 0;
<a name="l01138"></a>01138                 $aArray = $this-&gt;_parseObjXml($rootTag);
<a name="l01139"></a>01139         
<a name="l01140"></a>01140                 <span class="keywordflow">return</span> $aArray;
<a name="l01141"></a>01141         }
<a name="l01142"></a>01142         
<a name="l01151"></a>01151         function _parseObjXml($rootTag)
<a name="l01152"></a>01152         {
<a name="l01153"></a>01153                 $aArray = array();
<a name="l01154"></a>01154                 
<a name="l01155"></a>01155                 <span class="keywordflow">if</span> ($rootTag == <span class="stringliteral">"xjxobj"</span>)
<a name="l01156"></a>01156                 {
<a name="l01157"></a>01157                         <span class="keywordflow">while</span>(!stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;/xjxobj&gt;"</span>))
<a name="l01158"></a>01158                         {
<a name="l01159"></a>01159                                 $this-&gt;iPos++;
<a name="l01160"></a>01160                                 <span class="keywordflow">if</span>(stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;e&gt;"</span>))
<a name="l01161"></a>01161                                 {
<a name="l01162"></a>01162                                         $key = <span class="stringliteral">""</span>;
<a name="l01163"></a>01163                                         $value = null;
<a name="l01164"></a>01164                                                 
<a name="l01165"></a>01165                                         $this-&gt;iPos++;
<a name="l01166"></a>01166                                         <span class="keywordflow">while</span>(!stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;/e&gt;"</span>))
<a name="l01167"></a>01167                                         {
<a name="l01168"></a>01168                                                 <span class="keywordflow">if</span>(stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;k&gt;"</span>))
<a name="l01169"></a>01169                                                 {
<a name="l01170"></a>01170                                                         $this-&gt;iPos++;
<a name="l01171"></a>01171                                                         <span class="keywordflow">while</span>(!stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;/k&gt;"</span>))
<a name="l01172"></a>01172                                                         {
<a name="l01173"></a>01173                                                                 $key .= $this-&gt;aObjArray[$this-&gt;iPos];
<a name="l01174"></a>01174                                                                 $this-&gt;iPos++;
<a name="l01175"></a>01175                                                         }
<a name="l01176"></a>01176                                                 }
<a name="l01177"></a>01177                                                 <span class="keywordflow">if</span>(stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;v&gt;"</span>))
<a name="l01178"></a>01178                                                 {
<a name="l01179"></a>01179                                                         $this-&gt;iPos++;
<a name="l01180"></a>01180                                                         <span class="keywordflow">while</span>(!stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;/v&gt;"</span>))
<a name="l01181"></a>01181                                                         {
<a name="l01182"></a>01182                                                                 <span class="keywordflow">if</span>(stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;xjxobj&gt;"</span>))
<a name="l01183"></a>01183                                                                 {
<a name="l01184"></a>01184                                                                         $value = $this-&gt;_parseObjXml(<span class="stringliteral">"xjxobj"</span>);
<a name="l01185"></a>01185                                                                         $this-&gt;iPos++;
<a name="l01186"></a>01186                                                                 }
<a name="l01187"></a>01187                                                                 <span class="keywordflow">else</span>
<a name="l01188"></a>01188                                                                 {
<a name="l01189"></a>01189                                                                         $value .= $this-&gt;aObjArray[$this-&gt;iPos];
<a name="l01190"></a>01190                                                                         <span class="keywordflow">if</span> ($this-&gt;bDecodeUTF8Input)
<a name="l01191"></a>01191                                                                         {
<a name="l01192"></a>01192                                                                                 $value = $this-&gt;_decodeUTF8Data($value);
<a name="l01193"></a>01193                                                                         }
<a name="l01194"></a>01194                                                                 }
<a name="l01195"></a>01195                                                                 $this-&gt;iPos++;
<a name="l01196"></a>01196                                                         }
<a name="l01197"></a>01197                                                 }
<a name="l01198"></a>01198                                                 $this-&gt;iPos++;
<a name="l01199"></a>01199                                         }
<a name="l01200"></a>01200                                         
<a name="l01201"></a>01201                                         $aArray[$key]=$value;
<a name="l01202"></a>01202                                 }
<a name="l01203"></a>01203                         }
<a name="l01204"></a>01204                 }
<a name="l01205"></a>01205                 
<a name="l01206"></a>01206                 <span class="keywordflow">if</span> ($rootTag == <span class="stringliteral">"xjxquery"</span>)
<a name="l01207"></a>01207                 {
<a name="l01208"></a>01208                         $sQuery = <span class="stringliteral">""</span>;
<a name="l01209"></a>01209                         $this-&gt;iPos++;
<a name="l01210"></a>01210                         <span class="keywordflow">while</span>(!stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;/xjxquery&gt;"</span>))
<a name="l01211"></a>01211                         {
<a name="l01212"></a>01212                                 <span class="keywordflow">if</span> (stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;q&gt;"</span>) || stristr($this-&gt;aObjArray[$this-&gt;iPos],<span class="stringliteral">"&lt;/q&gt;"</span>))
<a name="l01213"></a>01213                                 {
<a name="l01214"></a>01214                                         $this-&gt;iPos++;
<a name="l01215"></a>01215                                         <span class="keywordflow">continue</span>;
<a name="l01216"></a>01216                                 }
<a name="l01217"></a>01217                                 $sQuery .= $this-&gt;aObjArray[$this-&gt;iPos];
<a name="l01218"></a>01218                                 $this-&gt;iPos++;
<a name="l01219"></a>01219                         }
<a name="l01220"></a>01220                         
<a name="l01221"></a>01221                         parse_str($sQuery, $aArray);
<a name="l01222"></a>01222                         <span class="keywordflow">if</span> ($this-&gt;bDecodeUTF8Input)
<a name="l01223"></a>01223                         {
<a name="l01224"></a>01224                                 <span class="keywordflow">foreach</span>($aArray as $key =&gt; $value)
<a name="l01225"></a>01225                                 {
<a name="l01226"></a>01226                                         $aArray[$key] = $this-&gt;_decodeUTF8Data($value);
<a name="l01227"></a>01227                                 }
<a name="l01228"></a>01228                         }
<a name="l01229"></a>01229                         <span class="comment">// If magic quotes is on, then we need to strip the slashes from the</span>
<a name="l01230"></a>01230                         <span class="comment">// array values because of the parse_str pass which adds slashes</span>
<a name="l01231"></a>01231                         <span class="keywordflow">if</span> (get_magic_quotes_gpc() == 1) {
<a name="l01232"></a>01232                                 $newArray = array();
<a name="l01233"></a>01233                                 <span class="keywordflow">foreach</span> ($aArray as $sKey =&gt; $sValue) {
<a name="l01234"></a>01234                                         <span class="keywordflow">if</span> (is_string($sValue))
<a name="l01235"></a>01235                                                 $newArray[$sKey] = stripslashes($sValue);
<a name="l01236"></a>01236                                         <span class="keywordflow">else</span>
<a name="l01237"></a>01237                                                 $newArray[$sKey] = $sValue;
<a name="l01238"></a>01238                                 }
<a name="l01239"></a>01239                                 $aArray = $newArray;
<a name="l01240"></a>01240                         }
<a name="l01241"></a>01241                 }
<a name="l01242"></a>01242                 
<a name="l01243"></a>01243                 <span class="keywordflow">return</span> $aArray;
<a name="l01244"></a>01244         }
<a name="l01245"></a>01245         
<a name="l01253"></a>01253         function _decodeUTF8Data($sData)
<a name="l01254"></a>01254         {
<a name="l01255"></a>01255                 $sValue = $sData;
<a name="l01256"></a>01256                 <span class="keywordflow">if</span> ($this-&gt;bDecodeUTF8Input)
<a name="l01257"></a>01257                 {
<a name="l01258"></a>01258                         $sFuncToUse = NULL;
<a name="l01259"></a>01259                         
<a name="l01260"></a>01260                         <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">'iconv'</span>))
<a name="l01261"></a>01261                         {
<a name="l01262"></a>01262                                 $sFuncToUse = <span class="stringliteral">"iconv"</span>;
<a name="l01263"></a>01263                         }
<a name="l01264"></a>01264                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">'mb_convert_encoding'</span>))
<a name="l01265"></a>01265                         {
<a name="l01266"></a>01266                                 $sFuncToUse = <span class="stringliteral">"mb_convert_encoding"</span>;
<a name="l01267"></a>01267                         }
<a name="l01268"></a>01268                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($this-&gt;sEncoding == <span class="stringliteral">"ISO-8859-1"</span>)
<a name="l01269"></a>01269                         {
<a name="l01270"></a>01270                                 $sFuncToUse = <span class="stringliteral">"utf8_decode"</span>;
<a name="l01271"></a>01271                         }
<a name="l01272"></a>01272                         <span class="keywordflow">else</span>
<a name="l01273"></a>01273                         {
<a name="l01274"></a>01274                                 trigger_error(<span class="stringliteral">"The incoming xajax data could not be converted from UTF-8"</span>, E_USER_NOTICE);
<a name="l01275"></a>01275                         }
<a name="l01276"></a>01276                         
<a name="l01277"></a>01277                         <span class="keywordflow">if</span> ($sFuncToUse)
<a name="l01278"></a>01278                         {
<a name="l01279"></a>01279                                 <span class="keywordflow">if</span> (is_string($sValue))
<a name="l01280"></a>01280                                 {
<a name="l01281"></a>01281                                         <span class="keywordflow">if</span> ($sFuncToUse == <span class="stringliteral">"iconv"</span>)
<a name="l01282"></a>01282                                         {
<a name="l01283"></a>01283                                                 $sValue = iconv(<span class="stringliteral">"UTF-8"</span>, $this-&gt;sEncoding.<span class="stringliteral">'//TRANSLIT'</span>, $sValue);
<a name="l01284"></a>01284                                         }
<a name="l01285"></a>01285                                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($sFuncToUse == <span class="stringliteral">"mb_convert_encoding"</span>)
<a name="l01286"></a>01286                                         {
<a name="l01287"></a>01287                                                 $sValue = mb_convert_encoding($sValue, $this-&gt;sEncoding, <span class="stringliteral">"UTF-8"</span>);
<a name="l01288"></a>01288                                         }
<a name="l01289"></a>01289                                         <span class="keywordflow">else</span>
<a name="l01290"></a>01290                                         {
<a name="l01291"></a>01291                                                 $sValue = utf8_decode($sValue);
<a name="l01292"></a>01292                                         }
<a name="l01293"></a>01293                                 }
<a name="l01294"></a>01294                         }
<a name="l01295"></a>01295                 }
<a name="l01296"></a>01296                 <span class="keywordflow">return</span> $sValue; 
<a name="l01297"></a>01297         }
<a name="l01298"></a>01298                 
<a name="l01299"></a>01299 }<span class="comment">// end class xajax </span>
<a name="l01300"></a>01300 
<a name="l01305"></a>01305 function xajaxErrorHandler($errno, $errstr, $errfile, $errline)
<a name="l01306"></a>01306 {
<a name="l01307"></a>01307         $errorReporting = error_reporting();
<a name="l01308"></a>01308         <span class="keywordflow">if</span> (($errno &amp; $errorReporting) == 0) <span class="keywordflow">return</span>;
<a name="l01309"></a>01309         
<a name="l01310"></a>01310         <span class="keywordflow">if</span> ($errno == E_NOTICE) {
<a name="l01311"></a>01311                 $errTypeStr = <span class="stringliteral">"NOTICE"</span>;
<a name="l01312"></a>01312         }
<a name="l01313"></a>01313         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($errno == E_WARNING) {
<a name="l01314"></a>01314                 $errTypeStr = <span class="stringliteral">"WARNING"</span>;
<a name="l01315"></a>01315         }
<a name="l01316"></a>01316         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($errno == E_USER_NOTICE) {
<a name="l01317"></a>01317                 $errTypeStr = <span class="stringliteral">"USER NOTICE"</span>;
<a name="l01318"></a>01318         }
<a name="l01319"></a>01319         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($errno == E_USER_WARNING) {
<a name="l01320"></a>01320                 $errTypeStr = <span class="stringliteral">"USER WARNING"</span>;
<a name="l01321"></a>01321         }
<a name="l01322"></a>01322         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($errno == E_USER_ERROR) {
<a name="l01323"></a>01323                 $errTypeStr = <span class="stringliteral">"USER FATAL ERROR"</span>;
<a name="l01324"></a>01324         }
<a name="l01325"></a>01325         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($errno == E_STRICT) {
<a name="l01326"></a>01326                 <span class="keywordflow">return</span>;
<a name="l01327"></a>01327         }
<a name="l01328"></a>01328         <span class="keywordflow">else</span> {
<a name="l01329"></a>01329                 $errTypeStr = <span class="stringliteral">"UNKNOWN: $errno"</span>;
<a name="l01330"></a>01330         }
<a name="l01331"></a>01331         $GLOBALS[<span class="stringliteral">'xajaxErrorHandlerText'</span>] .= <span class="stringliteral">"\n----\n[$errTypeStr] $errstr\nerror in line $errline of file $errfile"</span>;
<a name="l01332"></a>01332 }
<a name="l01333"></a>01333 
<a name="l01334"></a>01334 ?&gt;
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jul 22 11:16:46 2008 for University Scheduling System by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
